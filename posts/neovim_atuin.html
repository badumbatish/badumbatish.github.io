<!DOCTYPE html><!--FSpnyOe_VRbpcFaww_yLI--><html lang="en" class="px-4 py-4"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/7385e8d9d3c5518f-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="stylesheet" href="/_next/static/css/f55f51dd62de488d.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/8a287c41de7a8698.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-b2488ded99eca76e.js"/><script src="/_next/static/chunks/4bd1b696-cf72ae8a39fa05aa.js" async=""></script><script src="/_next/static/chunks/964-05defa3e0b8af640.js" async=""></script><script src="/_next/static/chunks/main-app-98bd3314d8e089b7.js" async=""></script><script src="/_next/static/chunks/874-437a265a67d6cfee.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-8778b7e42f8ceed2.js" async=""></script><script src="/_next/static/chunks/app/layout-6c77c7f0e287af25.js" async=""></script><meta name="next-size-adjust" content=""/><title>[ONGOING] Building an atuin clone for my workflow</title><meta name="description" content="Jasmine builds an atuin in neovim for her work"/><link rel="icon" href="/_next/static/media/pfp6.723cdd8c.png"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_d4e0c8 flex flex-col min-h-screen"><div hidden=""><!--$--><!--/$--></div><a href="/"><div class="flex justify-center items-center py-4 "><h1 class="text-4xl font-bold">Jasmine Tang</h1></div></a><div class="flex-1"><div class="py-12 flex flex-col items-center  justify-items-start mx-auto "><a class="flex justify-center text-4xl" href="/blog"><h2>My blog</h2></a><article class="p-8 prose pt-0.5 max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto"><div class="flex justify-center text-2xl font-bold "><h2>[ONGOING] Building an atuin clone for my workflow</h2></div><div class="flex justify-start text-xl font-bold underline"><h4>8888-08-08</h4></div><div><nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#introduction">Introduction</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#brt">BRT</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#components">Components</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#fzf-lua">fzf-lua</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#sqlite-lua">sqlite lua</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#features">Features</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#brtlog">BRTLog</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#last-command-based-on-type">Last command based on type</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#fuzzy-finding">Fuzzy finding</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#customizability">Customizability</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#quickfix-file">Quickfix file</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#shortcomings">Shortcomings</a></li></ol></nav><h1 id="introduction"><a aria-hidden="true" tabindex="-1" href="#introduction"><span class="icon icon-link"></span></a>Introduction</h1>
<p>Hello everyone, it's been one blog away since my last blog that's not about compilers. In this post, I want to talk about
a neovim plugin that I've made that have significantly improved my workflow productivity: BRT.nvim. Let's dive in :)</p>
<p>As always, here's this blog's music.
<a href="https://youtu.be/Ap3HoPGq3B4?si=1DtFRVXmKHIpQVwi" rel="nofollow" target="_blank">Bay trong chiều mưa by Nah</a></p>
<h1 id="brt"><a aria-hidden="true" tabindex="-1" href="#brt"><span class="icon icon-link"></span></a>BRT</h1>
<p>BRT stands for build, run and test and the plugin's description on github is "Build, run, and test your projects with 3 keystrokes."
The motivation for building this is that when I'm programming, I'm invoking the build, run and test commands quite often;
I often alternate between the file in neovim that I'm coding and the terminal for invoking the commands
and reading command stdout and stderr, leading to quite inefficient processes.</p>
<p>The vision I have for BRT is that I would want to shorten the development cycle: "run the usual command as effortless as possible"
and to reduce the mental cognitive load from switching between the development file I'm in and the terminal.</p>
<p>Overtime, I've also identified that when the command spits out an error including the location of a file,
it would take a few of my brain power to find the line dictating the file, and then i also have to
remember which line number the error is on, and then I copy the faulty file name to my clipboard, and then
go back to neovim to find and open the file and then jump to the line number to see what the code on that line is, and then go back
to the terminal to read the error message for that line.
Now, imagine if the command spits out 4 or 5 such error locations, you can start to see why it's getting really messy really fast.</p>
<p>Fortunately, some amazing people has already done the hard part, and some quick glue, we can have ourselves a tool to handle
all the shortcomings of the current development cycle.</p>
<h1 id="components"><a aria-hidden="true" tabindex="-1" href="#components"><span class="icon icon-link"></span></a>Components</h1>
<p>Now, building an atuin from pure scratch is going to be quite a task; what we'll be doing is offload some of that capabilities to</p>
<h2 id="fzf-lua"><a aria-hidden="true" tabindex="-1" href="#fzf-lua"><span class="icon icon-link"></span></a>fzf-lua</h2>
<h2 id="sqlite-lua"><a aria-hidden="true" tabindex="-1" href="#sqlite-lua"><span class="icon icon-link"></span></a>sqlite lua</h2>
<p><a href="https://sqlite.org/index.html" rel="nofollow" target="_blank">https://sqlite.org/index.html</a>
<a href="https://sqlite.org/quickstart.html" rel="nofollow" target="_blank">https://sqlite.org/quickstart.html</a></p>
<h1 id="features"><a aria-hidden="true" tabindex="-1" href="#features"><span class="icon icon-link"></span></a>Features</h1>
<h2 id="brtlog"><a aria-hidden="true" tabindex="-1" href="#brtlog"><span class="icon icon-link"></span></a>BRTLog</h2>
<p>When the user input a file, we would like to append <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>2>&#x26;1 | tee</span></span><button type="button" title="Copy code" aria-label="Copy code" data="2>&#x26;1 | tee" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> at the end of the command to allow us to store the output as well for future revisions (which would be
made clear soon).</p>
<h2 id="last-command-based-on-type"><a aria-hidden="true" tabindex="-1" href="#last-command-based-on-type"><span class="icon icon-link"></span></a>Last command based on type</h2>
<p>Of course, we can't always accommodate the request that every command that the user want to execute in 3 keystrokes. What the description
really meant is that when the user has already typed in and ran the command to succession, we would like the re-invocation of said command to take only 3 keystrokes.
With <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>&#x3C;leader>b</span></span><button type="button" title="Copy code" aria-label="Copy code" data="<leader>b" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> being 2 keystrokes3 already, we would want (most of the time) the last</p>
<h2 id="fuzzy-finding"><a aria-hidden="true" tabindex="-1" href="#fuzzy-finding"><span class="icon icon-link"></span></a>Fuzzy finding</h2>
<h2 id="customizability"><a aria-hidden="true" tabindex="-1" href="#customizability"><span class="icon icon-link"></span></a>Customizability</h2>
<h2 id="quickfix-file"><a aria-hidden="true" tabindex="-1" href="#quickfix-file"><span class="icon icon-link"></span></a>Quickfix file</h2>
<p>It's hard to describe the amazing utilities the quickfix list can do, but for a taste, here is an excerpt from vim docs:</p>
<blockquote>
<p>Vim has a special mode to speedup the edit-compile-edit cycle.  This is
inspired by the quickfix option of the Manx's Aztec C compiler on the Amiga.
The idea is to save the error messages from the compiler in a file and use Vim
to jump to the errors one by one.  You can examine each problem and fix it,
without having to remember all the error messages.</p>
</blockquote>
<h1 id="shortcomings"><a aria-hidden="true" tabindex="-1" href="#shortcomings"><span class="icon icon-link"></span></a>Shortcomings</h1>
<p>There are some shortcomings to be addressed.</p></div></article></div><!--$--><!--/$--></div><div class="bottom-4 right-4 fixed flex flex-col gap-2"><button class="shadow-md"><div class="inline text-xl font-bold border-black border-2 rounded p-2 bg-white">⇣⇣</div></button></div><footer class="footer self-center justify-center gap-2 pt-4 items-center italic "><p>Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)</p></footer><script src="/_next/static/chunks/webpack-b2488ded99eca76e.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[6874,[\"874\",\"static/chunks/874-437a265a67d6cfee.js\",\"880\",\"static/chunks/app/posts/%5Bid%5D/page-8778b7e42f8ceed2.js\"],\"\"]\n3:I[7555,[],\"\"]\n4:I[1295,[],\"\"]\n5:I[7921,[\"874\",\"static/chunks/874-437a265a67d6cfee.js\",\"177\",\"static/chunks/app/layout-6c77c7f0e287af25.js\"],\"default\"]\n7:I[9665,[],\"OutletBoundary\"]\n9:I[4911,[],\"AsyncMetadataOutlet\"]\nb:I[9665,[],\"ViewportBoundary\"]\nd:I[9665,[],\"MetadataBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[8393,[],\"\"]\n:HL[\"/_next/static/media/7385e8d9d3c5518f-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n:HL[\"/_next/static/css/f55f51dd62de488d.css\",\"style\"]\n:HL[\"/_next/static/css/8a287c41de7a8698.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"FSpnyOe-VRbpcFaww-yLI\",\"p\":\"\",\"c\":[\"\",\"posts\",\"neovim_atuin\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"neovim_atuin\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f55f51dd62de488d.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"px-4 py-4\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_d4e0c8 flex flex-col min-h-screen\",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex justify-center items-center py-4 \",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold\",\"children\":\"Jasmine Tang\"}]}]}],[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L5\",null,{}],[\"$\",\"footer\",null,{\"className\":\"footer self-center justify-center gap-2 pt-4 items-center italic \",\"children\":[\"$\",\"p\",null,{\"children\":\"Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)\"}]}]]}]}]]}],{\"children\":[\"posts\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"neovim_atuin\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/8a287c41de7a8698.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L7\",null,{\"children\":[\"$L8\",[\"$\",\"$L9\",null,{\"promise\":\"$@a\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$e\",null,{\"fallback\":null,\"children\":\"$Lf\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"12:I[8175,[],\"IconMark\"]\n11:T2933,"])</script><script>self.__next_f.push([1,"\u003cnav class=\"toc\"\u003e\u003col class=\"toc-level toc-level-1\"\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#introduction\"\u003eIntroduction\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#brt\"\u003eBRT\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#components\"\u003eComponents\u003c/a\u003e\u003col class=\"toc-level toc-level-2\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#fzf-lua\"\u003efzf-lua\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#sqlite-lua\"\u003esqlite lua\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#features\"\u003eFeatures\u003c/a\u003e\u003col class=\"toc-level toc-level-2\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#brtlog\"\u003eBRTLog\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#last-command-based-on-type\"\u003eLast command based on type\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#fuzzy-finding\"\u003eFuzzy finding\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#customizability\"\u003eCustomizability\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#quickfix-file\"\u003eQuickfix file\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#shortcomings\"\u003eShortcomings\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/nav\u003e\u003ch1 id=\"introduction\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#introduction\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eIntroduction\u003c/h1\u003e\n\u003cp\u003eHello everyone, it's been one blog away since my last blog that's not about compilers. In this post, I want to talk about\na neovim plugin that I've made that have significantly improved my workflow productivity: BRT.nvim. Let's dive in :)\u003c/p\u003e\n\u003cp\u003eAs always, here's this blog's music.\n\u003ca href=\"https://youtu.be/Ap3HoPGq3B4?si=1DtFRVXmKHIpQVwi\" rel=\"nofollow\" target=\"_blank\"\u003eBay trong chiều mưa by Nah\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"brt\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#brt\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eBRT\u003c/h1\u003e\n\u003cp\u003eBRT stands for build, run and test and the plugin's description on github is \"Build, run, and test your projects with 3 keystrokes.\"\nThe motivation for building this is that when I'm programming, I'm invoking the build, run and test commands quite often;\nI often alternate between the file in neovim that I'm coding and the terminal for invoking the commands\nand reading command stdout and stderr, leading to quite inefficient processes.\u003c/p\u003e\n\u003cp\u003eThe vision I have for BRT is that I would want to shorten the development cycle: \"run the usual command as effortless as possible\"\nand to reduce the mental cognitive load from switching between the development file I'm in and the terminal.\u003c/p\u003e\n\u003cp\u003eOvertime, I've also identified that when the command spits out an error including the location of a file,\nit would take a few of my brain power to find the line dictating the file, and then i also have to\nremember which line number the error is on, and then I copy the faulty file name to my clipboard, and then\ngo back to neovim to find and open the file and then jump to the line number to see what the code on that line is, and then go back\nto the terminal to read the error message for that line.\nNow, imagine if the command spits out 4 or 5 such error locations, you can start to see why it's getting really messy really fast.\u003c/p\u003e\n\u003cp\u003eFortunately, some amazing people has already done the hard part, and some quick glue, we can have ourselves a tool to handle\nall the shortcomings of the current development cycle.\u003c/p\u003e\n\u003ch1 id=\"components\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#components\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eComponents\u003c/h1\u003e\n\u003cp\u003eNow, building an atuin from pure scratch is going to be quite a task; what we'll be doing is offload some of that capabilities to\u003c/p\u003e\n\u003ch2 id=\"fzf-lua\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#fzf-lua\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003efzf-lua\u003c/h2\u003e\n\u003ch2 id=\"sqlite-lua\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#sqlite-lua\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003esqlite lua\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://sqlite.org/index.html\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://sqlite.org/index.html\u003c/a\u003e\n\u003ca href=\"https://sqlite.org/quickstart.html\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://sqlite.org/quickstart.html\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"features\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#features\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eFeatures\u003c/h1\u003e\n\u003ch2 id=\"brtlog\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#brtlog\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eBRTLog\u003c/h2\u003e\n\u003cp\u003eWhen the user input a file, we would like to append \u003cspan data-rehype-pretty-code-figure=\"\"\u003e\u003ccode data-language=\"plaintext\" data-theme=\"github-dark-dimmed\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan\u003e2\u003e\u0026#x26;1 | tee\u003c/span\u003e\u003c/span\u003e\u003cbutton type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"2\u003e\u0026#x26;1 | tee\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);window.setTimeout(() =\u003e this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;), 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/span\u003e at the end of the command to allow us to store the output as well for future revisions (which would be\nmade clear soon).\u003c/p\u003e\n\u003ch2 id=\"last-command-based-on-type\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#last-command-based-on-type\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eLast command based on type\u003c/h2\u003e\n\u003cp\u003eOf course, we can't always accommodate the request that every command that the user want to execute in 3 keystrokes. What the description\nreally meant is that when the user has already typed in and ran the command to succession, we would like the re-invocation of said command to take only 3 keystrokes.\nWith \u003cspan data-rehype-pretty-code-figure=\"\"\u003e\u003ccode data-language=\"plaintext\" data-theme=\"github-dark-dimmed\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan\u003e\u0026#x3C;leader\u003eb\u003c/span\u003e\u003c/span\u003e\u003cbutton type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"\u003cleader\u003eb\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);window.setTimeout(() =\u003e this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;), 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/span\u003e being 2 keystrokes3 already, we would want (most of the time) the last\u003c/p\u003e\n\u003ch2 id=\"fuzzy-finding\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#fuzzy-finding\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eFuzzy finding\u003c/h2\u003e\n\u003ch2 id=\"customizability\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#customizability\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eCustomizability\u003c/h2\u003e\n\u003ch2 id=\"quickfix-file\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#quickfix-file\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eQuickfix file\u003c/h2\u003e\n\u003cp\u003eIt's hard to describe the amazing utilities the quickfix list can do, but for a taste, here is an excerpt from vim docs:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eVim has a special mode to speedup the edit-compile-edit cycle.  This is\ninspired by the quickfix option of the Manx's Aztec C compiler on the Amiga.\nThe idea is to save the error messages from the compiler in a file and use Vim\nto jump to the errors one by one.  You can examine each problem and fix it,\nwithout having to remember all the error messages.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch1 id=\"shortcomings\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#shortcomings\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eShortcomings\u003c/h1\u003e\n\u003cp\u003eThere are some shortcomings to be addressed.\u003c/p\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"py-12 flex flex-col items-center  justify-items-start mx-auto \",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/blog\",\"className\":\"flex justify-center text-4xl\",\"children\":[\"$\",\"h2\",null,{\"children\":\"My blog\"}]}],[\"$\",\"article\",null,{\"className\":\"p-8 prose pt-0.5 max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex justify-center text-2xl font-bold \",\"children\":[\"$\",\"h2\",null,{\"children\":\"[ONGOING] Building an atuin clone for my workflow\"}]}],[\"$\",\"div\",null,{\"className\":\"flex justify-start text-xl font-bold underline\",\"children\":[\"$\",\"h4\",null,{\"children\":\"8888-08-08\"}]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$11\"}}]]}]]}]\n"])</script><script>self.__next_f.push([1,"a:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"[ONGOING] Building an atuin clone for my workflow\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Jasmine builds an atuin in neovim for her work\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/_next/static/media/pfp6.723cdd8c.png\"}],[\"$\",\"$L12\",\"3\",{}]],\"error\":null,\"digest\":\"$undefined\"}\nf:\"$a:metadata\"\n"])</script></body></html>