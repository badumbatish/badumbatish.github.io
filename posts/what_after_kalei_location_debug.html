<!DOCTYPE html><html lang="en" class="px-4 py-4"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/7385e8d9d3c5518f-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="stylesheet" href="/_next/static/css/c964a4de8175fdfc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/7ad14cf05ba66ef7.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-a3e322df7e912d9b.js"/><script src="/_next/static/chunks/4bd1b696-cc921fdf64582ac2.js" async=""></script><script src="/_next/static/chunks/517-f9c47ac1c3159d98.js" async=""></script><script src="/_next/static/chunks/main-app-64657d68b3fa7103.js" async=""></script><script src="/_next/static/chunks/173-ad05a37061268ac6.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-0a046863f2056281.js" async=""></script><script src="/_next/static/chunks/565-d3001cb0b7ac580c.js" async=""></script><script src="/_next/static/chunks/app/layout-5c184bc8512acba2.js" async=""></script><meta name="next-size-adjust" content=""/><title>[ONGOING] What after Kaleidoscope: Error location</title><meta name="description" content="Built with NextJS, TailwindCSS, and a tonnn of loveee :)"/><link rel="icon" href="/_next/static/media/pfp3.5cd65164.png"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_d4e0c8 flex flex-col min-h-screen"><a href="/"><div class="flex justify-center items-center py-4 "><h1 class="text-4xl font-bold">Jasmine Tang</h1></div></a><div class="flex-1"><div class="py-12 flex flex-col items-center  justify-items-start mx-auto "><a class="flex justify-center text-4xl" href="/blog"><h2>My blog</h2></a><article class="p-8 prose pt-0.5 max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto"><div class="flex justify-center text-2xl font-bold "><h2>[ONGOING] What after Kaleidoscope: Error location</h2></div><div class="flex justify-start text-xl font-bold underline"><h4>8888-08-08</h4></div><div class="flex font-bold">Edit:</div>My resume is <a href="https://www.overleaf.com/project/638120c30d0003f7bfe10360">here</a> (and downloadable <a href="https://badumbatish.github.io/about_me/Jasmine_Resume_Badumbatish.pdf">here</a>). If you know of a compiler related job posting, please feel free to contact me or refer me at either <a href="tanghocle456@gmail.com">tanghocle456@gmail.com</a> or <a href="jjasmine@berkeley.edu">jjasmine@berkeley.edu</a>.<hr/><div><nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#prologue">Prologue</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#introduction">Introduction</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#tokens-and-the-lexer">Tokens (and the lexer)</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#ast-nodes-and-the-parser">AST nodes (and the parser)</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#reporting">Reporting</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#ending-words">Ending words</a></li></ol></nav><h2 id="prologue"><a aria-hidden="true" tabindex="-1" href="#prologue"><span class="icon icon-link"></span></a>Prologue</h2>
<p>Hi everyone, wow, it's been a quick minute since I last updated my blog. How's everyone doing :) I'm still chugging
away at life applying to compiler jobs as well as schooling at Cal. Hope everybody's doing great :)</p>
<p>The
article is to new
people
who might be
asking:</p>
<p>"Ok, I've done the <a href="https://llvm.org/docs/tutorial/MyFirstLanguageFrontend/index.html" rel="nofollow" target="_blank">llvm tutorial</a> already.
What's next?" More specifically, the article is about adding primitive support for error reporting to the
toy compiler.</p>
<p>As is tradition :) I also wanna share some songs with you. The two songs are <a href="">Valentine</a> and <a href="">Into my arms</a>,
both by COIN, one of my fav band.</p>
<p>I hope you enjoy :) (both the songs and the blog hahah)</p>
<h2 id="introduction"><a aria-hidden="true" tabindex="-1" href="#introduction"><span class="icon icon-link"></span></a>Introduction</h2>
<p>Compiler diagnostics is an important aspect in one's compiler. From erroring out on the programmer's mistake to
providing warnings, the ability to accurately locate the location of the pesky problems to said
programmer is proven to be very valuable.</p>
<p>The article then discusses a way to improve upon the llvm Kaleidoscope toy compiler in the diagnostic aspect to the
user.</p>
<h2 id="tokens-and-the-lexer"><a aria-hidden="true" tabindex="-1" href="#tokens-and-the-lexer"><span class="icon icon-link"></span></a>Tokens (and the lexer)</h2>
<p>Let's start with the tokens and the lexer. When given the source code as a string (maybe via a file), the lexer
scans from left to right on that string, each time updating the index on that input string and returning a token.
This is the basis of our class Location.</p>
<pre class="shiki catppuccin-frappe" style="background-color:#303446;color:#c6d0f5" tabindex="0"><code><span class="line"><span style="color:#CA9EE6">class</span><span style="color:#E5C890;font-style:italic"> Location</span><span style="color:#949CBB"> {</span></span>
<span class="line"><span style="color:#CA9EE6">    size_t</span><span style="color:#C6D0F5"> internal_index </span><span style="color:#81C8BE">=</span><span style="color:#EF9F76"> 0</span><span style="color:#949CBB">;</span></span>
<span class="line"><span style="color:#737994;font-style:italic">    // todo, Jasmine please doooo thissss</span></span>
<span class="line"><span style="color:#737994;font-style:italic">    // override ++ operator</span></span>
<span class="line"><span style="color:#737994;font-style:italic">    // override -- operator</span></span>
<span class="line"><span style="color:#737994;font-style:italic">    // override == operator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#737994;font-style:italic">    // override | (to combine multiple Location)</span></span>
<span class="line"><span style="color:#737994;font-style:italic">    // int overload</span></span>
<span class="line"><span style="color:#949CBB">};</span></span></code></pre>
<p>Suppose our tokens are modeled as:</p>
<pre class="shiki catppuccin-frappe" style="background-color:#303446;color:#c6d0f5" tabindex="0"><code><span class="line"><span style="color:#CA9EE6">class</span><span style="color:#E5C890;font-style:italic"> Token</span><span style="color:#949CBB"> {</span></span>
<span class="line"><span style="color:#CA9EE6">public</span><span style="color:#949CBB">:</span></span>
<span class="line"><span style="color:#C6D0F5">  TokenType type</span><span style="color:#949CBB">;</span></span>
<span class="line"><span style="color:#E5C890">  std</span><span style="color:#949CBB">::</span><span style="color:#C6D0F5">string lexeme</span><span style="color:#949CBB">;</span></span>
<span class="line"><span style="color:#C6D0F5">  Location location</span><span style="color:#949CBB">;</span></span>
<span class="line"><span style="color:#8CAAEE;font-style:italic">  Token</span><span style="color:#949CBB">(</span><span style="color:#E5C890;font-style:italic">TokenType</span><span style="color:#EA999C;font-style:italic"> type</span><span style="color:#949CBB">,</span><span style="color:#E5C890"> std</span><span style="color:#949CBB">::</span><span style="color:#E5C890;font-style:italic">string</span><span style="color:#EA999C;font-style:italic"> lexeme</span><span style="color:#949CBB">,</span><span style="color:#E5C890;font-style:italic"> Location</span><span style="color:#EA999C;font-style:italic"> location</span><span style="color:#949CBB">)</span></span>
<span class="line"><span style="color:#949CBB">      :</span><span style="color:#8CAAEE;font-style:italic"> type</span><span style="color:#949CBB">(</span><span style="color:#C6D0F5">type</span><span style="color:#949CBB">),</span><span style="color:#8CAAEE;font-style:italic"> lexeme</span><span style="color:#949CBB">(</span><span style="color:#C6D0F5">std</span><span style="color:#949CBB">::</span><span style="color:#8CAAEE;font-style:italic">move</span><span style="color:#949CBB">(</span><span style="color:#C6D0F5">lexeme</span><span style="color:#949CBB">)),</span><span style="color:#8CAAEE;font-style:italic"> location</span><span style="color:#949CBB">(</span><span style="color:#C6D0F5">location</span><span style="color:#949CBB">)</span><span style="color:#949CBB"> {}</span></span>
<span class="line"><span style="color:#949CBB">};</span></span></code></pre>
<h2 id="ast-nodes-and-the-parser"><a aria-hidden="true" tabindex="-1" href="#ast-nodes-and-the-parser"><span class="icon icon-link"></span></a>AST nodes (and the parser)</h2>
<p>After we've produced our tokens, the parser takes in the stream of tokens and produces our AST. One of the question
is: "If something went wrong, how do we notify programmers?"</p>
<p>The simple thing to do is to combine all the AST's token's location into the AST's location. Below shows a pseudo
code for that</p>
<pre class="shiki catppuccin-frappe" style="background-color:#303446;color:#c6d0f5" tabindex="0"><code><span class="line"><span style="color:#C6D0F5">curr_tok_location </span><span style="color:#81C8BE">=</span><span style="color:#C6D0F5"> first token location of AST</span></span>
<span class="line"><span style="color:#C6D0F5">For all tokens T that made up the AST:</span></span>
<span class="line"><span style="color:#C6D0F5">    curr_tok_location </span><span style="color:#81C8BE">|=</span><span style="color:#C6D0F5"> T</span><span style="color:#949CBB">.</span><span style="color:#C6D0F5">location</span></span>
<span class="line"><span style="color:#C6D0F5">AST</span><span style="color:#949CBB">.</span><span style="color:#C6D0F5">Location </span><span style="color:#81C8BE">=</span><span style="color:#C6D0F5"> curr_tok_location</span></span></code></pre>
<h2 id="reporting"><a aria-hidden="true" tabindex="-1" href="#reporting"><span class="icon icon-link"></span></a>Reporting</h2>
<p>Nice, now that I'm listening to a true crime show on Netflix, writing this part, I feel a little bit hype and
scared hahah.</p>
<p>You'll probably wondering why we're having these location and haven't done anything yet.</p>
<h2 id="ending-words"><a aria-hidden="true" tabindex="-1" href="#ending-words"><span class="icon icon-link"></span></a>Ending words</h2></div></article></div></div><button class="bottom-4 right-4 fixed"><div class="inline text-2xl font-bold border-black border-2 rounded  p-0 m-0 h-100 w-100">⇡⇡</div></button><footer class="footer self-center justify-center gap-2 pt-4 items-center italic "><p>I&#x27;m looking for new grad compiler work, please email at jjasmine@berkeley.edu</p><p>Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)</p></footer><script src="/_next/static/chunks/webpack-a3e322df7e912d9b.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[8173,[\"173\",\"static/chunks/173-ad05a37061268ac6.js\",\"880\",\"static/chunks/app/posts/%5Bid%5D/page-0a046863f2056281.js\"],\"\"]\n3:I[5244,[],\"\"]\n4:I[3866,[],\"\"]\n5:I[1168,[\"173\",\"static/chunks/173-ad05a37061268ac6.js\",\"565\",\"static/chunks/565-d3001cb0b7ac580c.js\",\"177\",\"static/chunks/app/layout-5c184bc8512acba2.js\"],\"default\"]\n7:I[6213,[],\"OutletBoundary\"]\n9:I[6213,[],\"MetadataBoundary\"]\nb:I[6213,[],\"ViewportBoundary\"]\nd:I[4835,[],\"\"]\n:HL[\"/_next/static/media/7385e8d9d3c5518f-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n:HL[\"/_next/static/css/c964a4de8175fdfc.css\",\"style\"]\n:HL[\"/_next/static/css/7ad14cf05ba66ef7.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"t3zbGBLzZu41II7WUV5fa\",\"p\":\"\",\"c\":[\"\",\"posts\",\"what_after_kalei_location_debug\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"what_after_kalei_location_debug\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c964a4de8175fdfc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"px-4 py-4\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_d4e0c8 flex flex-col min-h-screen\",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex justify-center items-center py-4 \",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold\",\"children\":\"Jasmine Tang\"}]}]}],[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L5\",null,{}],[\"$\",\"footer\",null,{\"className\":\"footer self-center justify-center gap-2 pt-4 items-center italic \",\"children\":[[\"$\",\"p\",null,{\"children\":\"I'm looking for new grad compiler work, please email at jjasmine@berkeley.edu\"}],[\"$\",\"p\",null,{\"children\":\"Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)\"}]]}]]}]}]]}],{\"children\":[\"posts\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"what_after_kalei_location_debug\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/7ad14cf05ba66ef7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L7\",null,{\"children\":\"$L8\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"hO6GyCYPHPExGDdiaftCs\",{\"children\":[[\"$\",\"$L9\",null,{\"children\":\"$La\"}],[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"e:T1fb6,"])</script><script>self.__next_f.push([1,"\u003cnav class=\"toc\"\u003e\u003col class=\"toc-level toc-level-1\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#prologue\"\u003ePrologue\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#introduction\"\u003eIntroduction\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#tokens-and-the-lexer\"\u003eTokens (and the lexer)\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#ast-nodes-and-the-parser\"\u003eAST nodes (and the parser)\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#reporting\"\u003eReporting\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#ending-words\"\u003eEnding words\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/nav\u003e\u003ch2 id=\"prologue\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#prologue\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ePrologue\u003c/h2\u003e\n\u003cp\u003eHi everyone, wow, it's been a quick minute since I last updated my blog. How's everyone doing :) I'm still chugging\naway at life applying to compiler jobs as well as schooling at Cal. Hope everybody's doing great :)\u003c/p\u003e\n\u003cp\u003eThe\narticle is to new\npeople\nwho might be\nasking:\u003c/p\u003e\n\u003cp\u003e\"Ok, I've done the \u003ca href=\"https://llvm.org/docs/tutorial/MyFirstLanguageFrontend/index.html\" rel=\"nofollow\" target=\"_blank\"\u003ellvm tutorial\u003c/a\u003e already.\nWhat's next?\" More specifically, the article is about adding primitive support for error reporting to the\ntoy compiler.\u003c/p\u003e\n\u003cp\u003eAs is tradition :) I also wanna share some songs with you. The two songs are \u003ca href=\"\"\u003eValentine\u003c/a\u003e and \u003ca href=\"\"\u003eInto my arms\u003c/a\u003e,\nboth by COIN, one of my fav band.\u003c/p\u003e\n\u003cp\u003eI hope you enjoy :) (both the songs and the blog hahah)\u003c/p\u003e\n\u003ch2 id=\"introduction\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#introduction\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eCompiler diagnostics is an important aspect in one's compiler. From erroring out on the programmer's mistake to\nproviding warnings, the ability to accurately locate the location of the pesky problems to said\nprogrammer is proven to be very valuable.\u003c/p\u003e\n\u003cp\u003eThe article then discusses a way to improve upon the llvm Kaleidoscope toy compiler in the diagnostic aspect to the\nuser.\u003c/p\u003e\n\u003ch2 id=\"tokens-and-the-lexer\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#tokens-and-the-lexer\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTokens (and the lexer)\u003c/h2\u003e\n\u003cp\u003eLet's start with the tokens and the lexer. When given the source code as a string (maybe via a file), the lexer\nscans from left to right on that string, each time updating the index on that input string and returning a token.\nThis is the basis of our class Location.\u003c/p\u003e\n\u003cpre class=\"shiki catppuccin-frappe\" style=\"background-color:#303446;color:#c6d0f5\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#E5C890;font-style:italic\"\u003e Location\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003e    size_t\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e internal_index \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#EF9F76\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#737994;font-style:italic\"\u003e    // todo, Jasmine please doooo thissss\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#737994;font-style:italic\"\u003e    // override ++ operator\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#737994;font-style:italic\"\u003e    // override -- operator\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#737994;font-style:italic\"\u003e    // override == operator\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#737994;font-style:italic\"\u003e    // override | (to combine multiple Location)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#737994;font-style:italic\"\u003e    // int overload\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#949CBB\"\u003e};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSuppose our tokens are modeled as:\u003c/p\u003e\n\u003cpre class=\"shiki catppuccin-frappe\" style=\"background-color:#303446;color:#c6d0f5\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#E5C890;font-style:italic\"\u003e Token\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#C6D0F5\"\u003e  TokenType type\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#E5C890\"\u003e  std\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003estring lexeme\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#C6D0F5\"\u003e  Location location\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003e  Token\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E5C890;font-style:italic\"\u003eTokenType\u003c/span\u003e\u003cspan style=\"color:#EA999C;font-style:italic\"\u003e type\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#E5C890\"\u003e std\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#E5C890;font-style:italic\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#EA999C;font-style:italic\"\u003e lexeme\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#E5C890;font-style:italic\"\u003e Location\u003c/span\u003e\u003cspan style=\"color:#EA999C;font-style:italic\"\u003e location\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#949CBB\"\u003e      :\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003e type\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e),\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003e lexeme\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003estd\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003emove\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003elexeme\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e)),\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003e location\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003elocation\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e {}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#949CBB\"\u003e};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"ast-nodes-and-the-parser\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#ast-nodes-and-the-parser\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eAST nodes (and the parser)\u003c/h2\u003e\n\u003cp\u003eAfter we've produced our tokens, the parser takes in the stream of tokens and produces our AST. One of the question\nis: \"If something went wrong, how do we notify programmers?\"\u003c/p\u003e\n\u003cp\u003eThe simple thing to do is to combine all the AST's token's location into the AST's location. Below shows a pseudo\ncode for that\u003c/p\u003e\n\u003cpre class=\"shiki catppuccin-frappe\" style=\"background-color:#303446;color:#c6d0f5\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#C6D0F5\"\u003ecurr_tok_location \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e first token location of AST\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#C6D0F5\"\u003eFor all tokens T that made up the AST:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#C6D0F5\"\u003e    curr_tok_location \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e|=\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e T\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003elocation\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#C6D0F5\"\u003eAST\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003eLocation \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e curr_tok_location\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"reporting\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#reporting\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eReporting\u003c/h2\u003e\n\u003cp\u003eNice, now that I'm listening to a true crime show on Netflix, writing this part, I feel a little bit hype and\nscared hahah.\u003c/p\u003e\n\u003cp\u003eYou'll probably wondering why we're having these location and haven't done anything yet.\u003c/p\u003e\n\u003ch2 id=\"ending-words\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#ending-words\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eEnding words\u003c/h2\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"py-12 flex flex-col items-center  justify-items-start mx-auto \",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/blog\",\"className\":\"flex justify-center text-4xl\",\"children\":[\"$\",\"h2\",null,{\"children\":\"My blog\"}]}],[\"$\",\"article\",null,{\"className\":\"p-8 prose pt-0.5 max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex justify-center text-2xl font-bold \",\"children\":[\"$\",\"h2\",null,{\"children\":\"[ONGOING] What after Kaleidoscope: Error location\"}]}],[\"$\",\"div\",null,{\"className\":\"flex justify-start text-xl font-bold underline\",\"children\":[\"$\",\"h4\",null,{\"children\":\"8888-08-08\"}]}],[\"$\",\"div\",null,{\"className\":\"flex font-bold\",\"children\":\"Edit:\"}],\"My resume is \",[\"$\",\"a\",null,{\"href\":\"https://www.overleaf.com/project/638120c30d0003f7bfe10360\",\"children\":\"here\"}],\" (and downloadable \",[\"$\",\"a\",null,{\"href\":\"https://badumbatish.github.io/about_me/Jasmine_Resume_Badumbatish.pdf\",\"children\":\"here\"}],\"). If you know of a compiler related job posting, please feel free to contact me or refer me at either \",[\"$\",\"a\",null,{\"href\":\"tanghocle456@gmail.com\",\"children\":\"tanghocle456@gmail.com\"}],\" or \",[\"$\",\"a\",null,{\"href\":\"jjasmine@berkeley.edu\",\"children\":\"jjasmine@berkeley.edu\"}],\".\",[\"$\",\"hr\",null,{}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$e\"}}]]}]]}]\na:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"[ONGOING] What after Kaleidoscope: Error location\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Built with NextJS, TailwindCSS, and a tonnn of loveee :)\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/_next/static/media/pfp3.5cd65164.png\"}]]\n8:null\n"])</script></body></html>