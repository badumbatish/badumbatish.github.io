<!DOCTYPE html><!--otQaMgK0aP3dP1u0qOC_a--><html lang="en" class="px-4 py-4"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/7385e8d9d3c5518f-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="stylesheet" href="/_next/static/css/3b37cf79ceb9ce8f.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3864b451a61e4546.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-47bbed6067fe1d45.js"/><script src="/_next/static/chunks/4bd1b696-cf72ae8a39fa05aa.js" async=""></script><script src="/_next/static/chunks/964-05defa3e0b8af640.js" async=""></script><script src="/_next/static/chunks/main-app-98bd3314d8e089b7.js" async=""></script><script src="/_next/static/chunks/874-437a265a67d6cfee.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-f0f7551128d4c13f.js" async=""></script><script src="/_next/static/chunks/63-63ed21df6f1fc3e7.js" async=""></script><script src="/_next/static/chunks/app/layout-05e345a4cd50b3e1.js" async=""></script><meta name="next-size-adjust" content=""/><title>[ONGOING] The hitchhiker&#x27;s guide to LLVM debugging tools</title><meta name="description" content="Jasmine introduces to readers debugging techniques that would benefit their LLVM development."/><link rel="icon" href="/_next/static/media/pfp5.0daa0f7d.jpeg"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_d4e0c8 flex flex-col min-h-screen"><div hidden=""><!--$--><!--/$--></div><a href="/"><div class="flex justify-center items-center py-4 "><h1 class="text-4xl font-bold">Jasmine Tang</h1></div></a><div class="flex-1"><div class="py-12 flex flex-col items-center  justify-items-start mx-auto "><a class="flex justify-center text-4xl" href="/blog"><h2>My blog</h2></a><article class="p-8 prose pt-0.5 max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto"><div class="flex justify-center text-2xl font-bold "><h2>[ONGOING] The hitchhiker&#x27;s guide to LLVM debugging tools</h2></div><div class="flex justify-start text-xl font-bold underline"><h4>8888-08-08</h4></div><div><nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#prologue">Prologue</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#introduction">Introduction</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#resources">Resources</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#compiling-and-testing-time">Compiling and testing time</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#release--assertion--debug">(Release + Assertion) + (Debug)</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#build-your-targetsubproject-only">Build your target/subproject only</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#use-llvm-release-compilers">Use LLVM-release compilers</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#ccache-ninja-and-lld">ccache, ninja and LLD</a><ol class="toc-level toc-level-3"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#ccache">ccache</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#ninja">Ninja</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#lld">LLD</a></li></ol></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#grepping">Grepping</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#git-potpourri-on-the-pull-requests">Git potpourri on the pull requests</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#blame--show-a-commit">Blame &#x26; show a commit</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#grepping-it">grepping it</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#godbolt--debug-only--print-after-all--print-changed-and-all-that">godbolt, -debug-only, -print-after-all, -print-changed and all that</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#inspecting-ir-changes">Inspecting IR changes</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#cutting-out-the-noise">Cutting out the noise</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#deep-diving-into-a-specific-passes">Deep diving into a specific passes</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#lldb-and-debuggers">lldb and debuggers</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#default">Default</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#dump">dump.*</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#llvmutilslldbdataformatterspy">llvm/utils/lldbDataFormatters.py</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#conditional-breakpoints">Conditional breakpoints</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#tablegen">tablegen</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#grepping-tablegen">Grepping tablegen</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#gitbisect">gitbisect</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#llvm-reduce">llvm-reduce</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#rsp_bisectpy">rsp_bisect.py</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#llvm-extract">llvm-extract</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#reading-skills-experience-or-think-harder">Reading skills, experience, (or think harder)</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#asking-people">Asking people</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#acknowledgments">Acknowledgments</a></li></ol></nav><h1 id="prologue"><a aria-hidden="true" tabindex="-1" href="#prologue"><span class="icon icon-link"></span></a>Prologue</h1>
<p>Hello everyone, how's everybody doing? I'm still chugging away at solving LLVM issues at Igalia :) Fall and winter's
coming soon, and by the time this blog's up, I will be turning a year older. Welp, another year a few
more blogs am i right hahahahhaa.</p>
<p>A few weekends ago, I went up to Thousand Oaks and Malibu beach to visit my friend from Berkeley and then took an Amtrak with a date to
San Diego. Isn't life just beautiful like that? I couldn't have asked for more.</p>
<p>This blog will be detailing my debugging methods since working on LLVM. For the foreseeable future (while the blog
title has [ONGOING]), this blog will be continually updated with new knowledge of mine for any shortcomings as I'm still new to LLVM.</p>
<p>For external reviewers and discussion of this blog and others, you can join the discord server <a href="https://discord.gg/mvdVEqDQxn" rel="nofollow" target="_blank">here</a> or the discord link in my front page.</p>
<p>For internal reviewers at Igalia, you can also dm me on Matrix, up to your preferences!</p>
<p>As tradition, here's a <a href="https://www.youtube.com/watch?v=kvqfHcgIagI" rel="nofollow" target="_blank">song</a> for interested readers :) I hope everyone enjoys :)</p>
<h1 id="introduction"><a aria-hidden="true" tabindex="-1" href="#introduction"><span class="icon icon-link"></span></a>Introduction</h1>
<p>Debugging has always been a quintessential tool in a software engineer's toolboxes.</p>
<p>As a piece of software or framework gets more complicated, the flow of a program invariantly gets more complex, which requires software
engineers to careful and methodically investigate an issue/bug instead of blindly following one's instinct.</p>
<p>In this sense, although the article talks about debugging, the article inherently provides a sample of the author's problem-solving toolbox.</p>
<p>I hope this helps junior LLVM developer or low level developer just starting out in their journey!</p>
<p>Welp, let's dig in!</p>
<h1 id="resources"><a aria-hidden="true" tabindex="-1" href="#resources"><span class="icon icon-link"></span></a>Resources</h1>
<p>In writing the blog, I utilize these resources, including, but not excluding:</p>
<ul>
<li><a href="https://www.npopov.com/2023/10/22/How-to-reduce-LLVM-crashes.html" rel="nofollow" target="_blank">How to reduce LLVM crashes</a></li>
<li><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" rel="nofollow" target="_blank">Clear step by step to oneshot debugging any LLVM issue with ChatGPT</a></li>
<li><a href="https://git-scm.com/doc" rel="nofollow" target="_blank">Git manual</a></li>
<li><a href="https://llvm.org/docs/LangRef.html" rel="nofollow" target="_blank">LLVM lang ref</a></li>
</ul>
<h1 id="compiling-and-testing-time"><a aria-hidden="true" tabindex="-1" href="#compiling-and-testing-time"><span class="icon icon-link"></span></a>Compiling and testing time</h1>
<p><strong>Note</strong>: Some parts of the section takes inspiration from Nikita Popov's <a href="https://developers.redhat.com/articles/2022/12/20/how-contribute-llvm" rel="nofollow" target="_blank">How to contribute to LLVM</a>
and LLVM's <a href="https://llvm.org/docs/CMake.html" rel="nofollow" target="_blank">Building LLVM with CMake</a>. I highly recommend you take a few minutes to read through them!</p>
<p>Compile time on a big codebase has always been a pain point for programmers. A few seconds here, a few minutes there, and you have wasted
at least half an hour extra waiting to compile the LLVM repository.</p>
<p>Once you hit compile, if you have to wait a while, your mind wanders away to other things and you start to drift away, thinking about other topics.
Point is, the context switching causes you to lose out on your focusing power.</p>
<p>The following subsections then describes how to save time on your compiling and executing. This will reduce your development cycle
and TODO</p>
<p><img src="/blogs/hitchhiker_guide_to_llvm_debugging/compile_meme.png" alt="compile_meme"></p>
<h2 id="release--assertion--debug"><a aria-hidden="true" tabindex="-1" href="#release--assertion--debug"><span class="icon icon-link"></span></a>(Release + Assertion) + (Debug)</h2>
<p>A common rule of thumb to have is you build a codebase in Debug mode when you're in development, and then you build it in Release mode
when shipping it out to users. But this is not always the case...</p>
<p>If you're not stepping through the code with the LLDB debugger, chances are the trade-off of being in Debug mode; receiving
accurate stack trace locations and source layout position is not worth it.
Debug mode takes longer to compile and link, test cases with Debug mode are often compiled and ran slower.</p>
<p>Release mode with assertion turned on, on the other hands, compiles and run tests blazingly fast as well as gives good diagnostics.</p>
<p>Therefore, it's very beneficial to have two build modes when contributing to LLVM:</p>
<p>You can set the modes for your build by appending these two options when configuring CMake</p>
<pre><code>Debug            : -DCMAKE_BUILD_TYPE=Debug
Release + Assert : -DCMAKE_BUILD_TYPE=Release -DLLVM_ENABLE_ASSERTIONS=ON
</code></pre>
<h2 id="build-your-targetsubproject-only"><a aria-hidden="true" tabindex="-1" href="#build-your-targetsubproject-only"><span class="icon icon-link"></span></a>Build your target/subproject only</h2>
<p>You can also save on your development time by only building the subproject that are of interests to you.</p>
<p>For example, if you're doing majority webassembly or x86, don't build RISCV on top of it. Some tablegen changes in common between RISCV and WebAssembly
will inevitably trigger compilation on the RISCV target, taking a dozen of seconds to compile. Enabling extra targets will also
enable extra tests for that target.</p>
<p>The flag to include/exclude subprojects is <code>LLVM_TARGETS_TO_BUILD</code></p>
<p>From LLVM:</p>
<blockquote>
<p>Semicolon-separated list of targets to build, or all for building all targets. Case-sensitive. Defaults to all. Example: -DLLVM_TARGETS_TO_BUILD="X86;PowerPC".</p>
</blockquote>
<blockquote>
<p>The full list, as of March 2023, is: AArch64, AMDGPU, ARM, AVR, BPF, Hexagon, Lanai, LoongArch, Mips, MSP430, NVPTX, PowerPC, RISCV, Sparc, SystemZ, VE, WebAssembly, X86, XCore.</p>
</blockquote>
<h2 id="use-llvm-release-compilers"><a aria-hidden="true" tabindex="-1" href="#use-llvm-release-compilers"><span class="icon icon-link"></span></a>Use LLVM-release compilers</h2>
<p>If you're using a package manager's <code>clang</code> or a <code>clang</code> that comes with your operating system, chances are you're losing out
on development time.</p>
<p>With <a href="https://en.wikipedia.org/wiki/Profile-guided_optimization" rel="nofollow" target="_blank">PGO</a>, <a href="https://research.facebook.com/publications/bolt-a-practical-binary-optimizer-for-data-centers-and-beyond/" rel="nofollow" target="_blank">BOLT</a>
and various tips and tricks turned on,
LLVM maintainer and volunteers have been hard at work optimizing the LLVM official release version of clang
to be highly optimized for the LLVM compiler development experiment. How good is it? You can see for yourself with the claim from
the BOLT paper</p>
<blockquote>
<p>For datacenter applications, BOLT achieves up to 7.0% performance speedups on top of profile-guided function reordering and LTO.
For the GCC and Clang compilers, our evaluation shows that BOLT speeds up their binaries by up to 20.4% on top of FDO and LTO,
and up to 52.1% if the binaries are built without FDO and LTO.</p>
</blockquote>
<p>Unfortunately, for MacOS users, BOLT only comes with Linux x86 and AArch64. However, I'd still recommend downloading your
OS's version of the compiler from LLVM's <a href="https://github.com/llvm/llvm-project/releases" rel="nofollow" target="_blank">release page</a> as anecdotally, I can
still feel some extra perform when compiling LLVM.</p>
<p>After you've downloaded the LLVM release compiler to a folder, you can use it in your CMake configuration command as follow</p>
<pre><code>-DCMAKE_C_COMPILER=$HOME/Developer/igalia/LLVM-20.1.7-macOS-ARM64/bin/clang \
-DCMAKE_CXX_COMPILER=$HOME/Developer/igalia/LLVM-20.1.7-macOS-ARM64/bin/clang++
</code></pre>
<p>provided that you download and extract it to a folder of <code>$HOME/Developer/igalia/LLVM-20.1.7-macOS-ARM64</code></p>
<p>Btw, I learned about this through my conversation with David Spicket:</p>
<blockquote>
<p>bdbt: i'm new grad and joining a company as a compiler engineer, would compiling a new, seperate compiler that's BOLT-activated specifically for compiling compiler makes sense?
It will give me a sizable reduction in compile time and allow for faster iteration but i'm not sure if there will be errors when using the special version? any insights would be appreciated</p>
</blockquote>
<blockquote>
<p>David Spicket: At least for Linux x86 and AArch64, LLVM's release archives on GitHub are already BOLT-ed (you can check with objdump -h clang | grep bolt). So if there are potential issues, we're all at risk 🙂
If you want to try BOLT-ing something yourself, <a href="https://github.com/llvm/llvm-project/blob/main/bolt/docs/OptimizingClang.md" rel="nofollow" target="_blank">https://github.com/llvm/llvm-project/blob/main/bolt/docs/OptimizingClang.md</a> seems like a good place to start (I've not done this myself).</p>
</blockquote>
<h2 id="ccache-ninja-and-lld"><a aria-hidden="true" tabindex="-1" href="#ccache-ninja-and-lld"><span class="icon icon-link"></span></a>ccache, ninja and LLD</h2>
<p>Haha, you thought we were done huh. Even on top of all this, we can use extra tools to squeeze out
extra time in our day-to-day work.</p>
<h3 id="ccache"><a aria-hidden="true" tabindex="-1" href="#ccache"><span class="icon icon-link"></span></a>ccache</h3>
<p>For increment builds, ccache "speeds up recompilation by caching previous compilations and detecting when the same compilation is being done again."</p>
<p>In my use case, when compiling the codebase from different commits (because some branches are opened a few weeks ago and some are opened recently after I have <code>git pull</code> from upstream),
compiling the same <code>build</code> folder would often take a lot of time. This is where ccache comes in.</p>
<p>You can use the LLVM's flag for ccache together with other CMake flags <code>-DLLVM_CCACHE_BUILD=true</code>.</p>
<p>In addition to this, you can create a ccache configuration in <code>$HOME/.ccache/ccache.conf</code>, allowing more flexibility and power to ccache.</p>
<pre><code>file_clone = true
inode_cache = true
max_size = 200G
base_dir = /
absolute_paths_in_stderr = true
</code></pre>
<p>Below, I'll provide the explanation for each configuration option.</p>
<ul>
<li><code>file_clone = true</code>: performs copy-on-write if possible, improving the caching performance.</li>
<li><code>inode_cache = true</code>: instruct ccache to cache a file based on its device, inode and timestamps. This cuts down on time spent hashing
files and therefore improves caching performance since some file in LLVM can contain tens of thousands of lines.</li>
<li><code>max_size = 200G</code>: allocates 200 gigabyte of storage on your computer for ccache to use.</li>
<li><code>base_dir = /</code>: allows caching of all directories (any directory's path that starts with /).</li>
<li><code>absolute_paths_in_stderr</code>: instruct ccache to rewrite relative paths to absolute paths in a compiler's textual output in lieu of
incorrect relative paths in warning or error messages.</li>
</ul>
<p>I want to thank my colleague Alex Bradbury for introducing me to these options :)</p>
<h3 id="ninja"><a aria-hidden="true" tabindex="-1" href="#ninja"><span class="icon icon-link"></span></a>Ninja</h3>
<p>Ninja's a build system thats focused on speed and is designed <code>run builds as fast as possible.</code></p>
<p>From Ninja's wikipedia:</p>
<blockquote>
<p>In essence, Ninja is meant to replace Make, which is slow when performing incremental (or no-op) builds. This can considerably slow down developers working on large projects, such as Google Chrome which compiles 40,000 input files into a single executable. In fact, Google Chrome is a main user and motivation for Ninja. It's also used to build Android (via Makefile translation by Kati), and is used by most developers working on LLVM.</p>
</blockquote>
<p>You can opt to use Ninja when configuring CMake with <code>-GNinja</code> and build your code with another seperate command
<code>ninja -C &#x3C;your_build_folder> &#x3C;your_build_target></code></p>
<p>For example, to build the codebase and test everything:</p>
<pre class="shiki catppuccin-frappe" style="background-color:#303446;color:#c6d0f5" tabindex="0"><code><span class="line"><span style="color:#8CAAEE;font-style:italic">ninja</span><span style="color:#A6D189"> -C</span><span style="color:#A6D189"> build</span><span style="color:#A6D189"> check-all</span></span></code></pre>
<h3 id="lld"><a aria-hidden="true" tabindex="-1" href="#lld"><span class="icon icon-link"></span></a>LLD</h3>
<p>From the LLVM's LLD page:</p>
<blockquote>
<p>LLD is a linker from the LLVM project that is a drop-in replacement for system linkers and runs much faster than them.</p>
</blockquote>
<p>In fact, it is so fast that I think it's a necessity to enable this by default when developing LLVM, especially when your
lld executable comes from the LLVM release page that has PGO and BOLT enabled, providing even faster linking time.</p>
<p>As of Monday, August 11, 2025, here is the comparison from the LLVM LLD page, with the percentage difference between ld, gold and lld.</p>








































<table><thead><tr><th>Program</th><th>Output size</th><th>GNU ld (time)</th><th>GNU gold w/ threads (time)</th><th>lld w/ threads (time)</th></tr></thead><tbody><tr><td>ffmpeg dbg</td><td>92 MiB</td><td>1.72s, (4.91x)</td><td>1.01s, (2.89x)</td><td>0.35s  (1.00x)</td></tr><tr><td>mysqld dbg</td><td>154 MiB</td><td>8.50s, (12.50x)</td><td>2.68s, (3.94x)</td><td>0.68s  (1.00x)</td></tr><tr><td>clang dbg</td><td>1.67 GiB</td><td>104.03s, (19.70x)</td><td>23.49s, (4.45x)</td><td>5.28s  (1.00x)</td></tr><tr><td>chromium dbg</td><td>1.14 GiB</td><td>209.05s, (12.52x)</td><td>60.82s, (3.64x)</td><td>16.70s  (1.00x)</td></tr></tbody></table>
<p>You can enable the LLD linker with <code>-DLLVM_USE_LINKER=lld</code></p>
<h1 id="grepping"><a aria-hidden="true" tabindex="-1" href="#grepping"><span class="icon icon-link"></span></a>Grepping</h1>
<p>Well, now all that's out of the way, let's talk about grepping.</p>
<p>In a big and unfamiliar codebase, sometimes, you just don't have much of a clue on how things go. In cases like this, you can
start querying random keywords that are related to your issue and work your way from there.</p>
<p>Sometimes, it just so happens that when you're querying a function that's used in a test case via an <a href="https://en.wikipedia.org/wiki/Language_Server_Protocol" rel="nofollow" target="_blank">LSP</a>,
the LSP gives you the source from the OS compiler or the LLVM release compiler (since you built the project with it), grepping might be
one of the few ways to get you to the function's source in the repository instead.</p>
<p>In my case, I opt for ripgrep instead of grep due to the <a href="https://github.com/BurntSushi/ripgrep?tab=readme-ov-file#quick-examples-comparing-tools" rel="nofollow" target="_blank">performance difference</a>.</p>
<p>With such aforementioned importance, often in the following sections, I will try to provide how grepping integrates with each area.</p>
<h1 id="git-potpourri-on-the-pull-requests"><a aria-hidden="true" tabindex="-1" href="#git-potpourri-on-the-pull-requests"><span class="icon icon-link"></span></a>Git potpourri on the pull requests</h1>
<p>For a beginner in a codebase (even a seasoned programmer),
the ability to obtain more information and context,
extending further than the code sitting in front of them, is extremely helpful.</p>
<h2 id="blame--show-a-commit"><a aria-hidden="true" tabindex="-1" href="#blame--show-a-commit"><span class="icon icon-link"></span></a>Blame &#x26; show a commit</h2>
<p>When exploring a new area/file, I would often combine <a href="https://git-scm.com/docs/git-blame" rel="nofollow" target="_blank">git blame</a> together with <a href="https://git-scm.com/docs/git-show" rel="nofollow" target="_blank">git show</a>
to obtain more context for what I'm working with.</p>
<p>The workflow is: <code>git blame</code> the file -> get the commit hash for the line I'm interested in -> input the commit hash to <code>git show</code></p>
<p>In investigating an issue through commits, it's also helpful to look up on the internet for the commit's pull requests, either through GitHub or through reviews.llvm.org.
For example, in this <a href="https://reviews.llvm.org/D124685?id=431828#inline-1213666" rel="nofollow" target="_blank">pull request</a>, the author and reviewers have added a TODO, but without reading the PRs,
the TODO would seem very unclear and hazy, leaving code readers wanting more context.</p>
<p>In other words, exploring code is the first step, after that, commit messages provides greater additional context on the problems being solved and finally, the pull request
and the <code>reviews.llvm.org</code> provides opinions and directives.</p>
<h2 id="grepping-it"><a aria-hidden="true" tabindex="-1" href="#grepping-it"><span class="icon icon-link"></span></a>grepping it</h2>
<p>With trying to explore what's happening for a subproject/subsection in LLVM, you can also utilize grepping in git without going through the github online gui.</p>
<p>Belows shows a picture of me applying git grep to the topic of WebAssembly where theres a mention of either "fold" or "DAG" via this command:</p>
<pre><code>git log --grep='WebAssembly' --grep='fold\|DAG' --all-match
</code></pre>
<p><img src="/blogs/hitchhiker_guide_to_llvm_debugging/git_grep_wasm_fold_dag.png" alt="showing git grep"></p>
<h1 id="godbolt--debug-only--print-after-all--print-changed-and-all-that"><a aria-hidden="true" tabindex="-1" href="#godbolt--debug-only--print-after-all--print-changed-and-all-that"><span class="icon icon-link"></span></a>godbolt, -debug-only, -print-after-all, -print-changed and all that</h1>
<p>If you haven't heard of godbolt, think of it as a way for compiler developer to say no to "but but but it works on my machineeee :('</p>
<p>Formally, godbolt is <code>an interactive online compiler which shows the assembly output of compiled C++, Rust, Go (and many more) code.</code></p>
<p>Buttt, such a simple description couldn't possibly do the site its justice bla bla blah</p>
<p>TODO: HEY JASMINE: Ok, the mindset here is while providing users how to use godbolt, I should also provide a way to do this via the command line.</p>
<h2 id="inspecting-ir-changes"><a aria-hidden="true" tabindex="-1" href="#inspecting-ir-changes"><span class="icon icon-link"></span></a>Inspecting IR changes</h2>
<p>TODO: Explain this in a way that's akin to -print-changed</p>
<p><img src="/blogs/hitchhiker_guide_to_llvm_debugging/godbolt_show_opt.png" alt="godbolt_show_opt"></p>
<h2 id="cutting-out-the-noise"><a aria-hidden="true" tabindex="-1" href="#cutting-out-the-noise"><span class="icon icon-link"></span></a>Cutting out the noise</h2>
<p>-print-changed</p>
<h2 id="deep-diving-into-a-specific-passes"><a aria-hidden="true" tabindex="-1" href="#deep-diving-into-a-specific-passes"><span class="icon icon-link"></span></a>Deep diving into a specific passes</h2>
<p>After you've filtered out the specific pass that you think are affecting your</p>
<h1 id="lldb-and-debuggers"><a aria-hidden="true" tabindex="-1" href="#lldb-and-debuggers"><span class="icon icon-link"></span></a>lldb and debuggers</h1>
<p>A quick google on "gdb versus lldb" would give a similar generic answer to how similar the two tools are and it's often up to personal
preferences. This article won't try to persuade you to use either gdb or lldb, but perhaps it will introduce you more to the strong integration
between lldb and the LLVM codebase :)</p>
<h2 id="default"><a aria-hidden="true" tabindex="-1" href="#default"><span class="icon icon-link"></span></a>Default</h2>
<p>lldb has auto repeat on when you press sth then you press return</p>
<h2 id="dump"><a aria-hidden="true" tabindex="-1" href="#dump"><span class="icon icon-link"></span></a>dump.*</h2>
<p>The <code>dump()</code> helper function in llvm is basically a pretty printer for</p>
<p>A lot of the time, when you perform
ripgrep <code>void dump.*\(\) </code>
Loop class has dumpVerbose</p>
<p>RegAlloc class has dumpState</p>
<h2 id="llvmutilslldbdataformatterspy"><a aria-hidden="true" tabindex="-1" href="#llvmutilslldbdataformatterspy"><span class="icon icon-link"></span></a>llvm/utils/lldbDataFormatters.py</h2>
<p>lldbDataFormatters.py (LDF) is a python script to integrate with LLDB. In LLDB, when you print a specific LLVM data structure
that doesn't have the <code>dump()</code> helper function, things can get a bit messy due to how the debugger's treating the data structure as
a pointer only.</p>
<p>For LLVM-specific data structures, LDF provides helpful pretty printer for DenseMap, DenseSet, StringRef, SmallVector, SmallStrings</p>
<p>To utilize the script, once you fire up LLDB, you can provide LLDB with <span class="shiki catppuccin-frappe" style="background-color:#303446;color:#c6d0f5" tabindex="0"><code><span class="line"><span style="color:#E78284;font-style:italic">command</span><span style="color:#A6D189"> script</span><span style="color:#A6D189"> import</span><span style="color:#A6D189"> PathToScript/lldbDataFormatters.py</span></span></code></span>
where PathToScript is the directory path to LDF.</p>
<p>For example, if you're debugging in <code>llvm-project</code>, which houses the lldbDataFormatters naturally in llvm/utils:</p>
<pre><code>...
(lldb) command script import llvm/utils/lldbDataFormatters.py
...
</code></pre>
<p>Here's a picture showing the before and after importing the formatter script:</p>
<p><img src="/blogs/hitchhiker_guide_to_llvm_debugging/showcase_lldbDataFormatters.png" alt="showcase_lldbformatters"></p>
<p>Alas, a programmer would not be a programmer if not for their automation. It would be an inconvenience (and a detriment to their productivity)
if a programmer were supposed to remember the script import command and then remember to type it in
every time.</p>
<p>Instead, you can add this to <code>.lldbinit</code> in your home directory and let the computer perform said steps for you:</p>
<pre><code>script
"llvm-project" in os.getcwd() and lldb.debugger.HandleCommand("command script import llvm/utils/lldbDataFormatters.py")
</code></pre>
<h2 id="conditional-breakpoints"><a aria-hidden="true" tabindex="-1" href="#conditional-breakpoints"><span class="icon icon-link"></span></a>Conditional breakpoints</h2>
<p>Personally, I set up a keymap in my neovim so I don't have to type so much. Here's the lua code for the keymap</p>
<pre class="shiki catppuccin-frappe" style="background-color:#303446;color:#c6d0f5" tabindex="0"><code><span class="line"><span style="color:#CA9EE6">local</span><span style="color:#8CAAEE;font-style:italic"> yank_for_conditional_break</span><span style="color:#81C8BE"> =</span><span style="color:#CA9EE6"> function</span><span style="color:#949CBB"> ()</span></span>
<span class="line"><span style="color:#CA9EE6">    local</span><span style="color:#C6D0F5"> path </span><span style="color:#81C8BE">=</span><span style="color:#C6D0F5"> vim.fn.</span><span style="color:#8CAAEE;font-style:italic">expand</span><span style="color:#C6D0F5">(</span><span style="color:#A6D189">'%:.'</span><span style="color:#C6D0F5">)</span></span>
<span class="line"><span style="color:#CA9EE6">    local</span><span style="color:#C6D0F5"> line </span><span style="color:#81C8BE">=</span><span style="color:#C6D0F5"> vim.fn.</span><span style="color:#8CAAEE;font-style:italic">line</span><span style="color:#C6D0F5">(</span><span style="color:#A6D189">'.'</span><span style="color:#C6D0F5">)</span></span>
<span class="line"><span style="color:#CA9EE6">    local</span><span style="color:#C6D0F5"> word </span><span style="color:#81C8BE">=</span><span style="color:#C6D0F5"> vim.fn.</span><span style="color:#8CAAEE;font-style:italic">expand</span><span style="color:#C6D0F5">(</span><span style="color:#A6D189">"&#x3C;cword>"</span><span style="color:#C6D0F5">)</span></span>
<span class="line"><span style="color:#CA9EE6">    local</span><span style="color:#C6D0F5"> result </span><span style="color:#81C8BE">=</span><span style="color:#A6D189"> 'breakpoint set --file '</span><span style="color:#81C8BE">..</span><span style="color:#C6D0F5"> path </span><span style="color:#81C8BE">..</span><span style="color:#A6D189"> ' --line ' </span><span style="color:#81C8BE">..</span><span style="color:#C6D0F5"> line </span><span style="color:#81C8BE">..</span><span style="color:#A6D189"> ' --condition ' </span><span style="color:#81C8BE">..</span><span style="color:#A6D189"> '</span><span style="color:#F4B8E4">\'</span><span style="color:#A6D189">' </span><span style="color:#81C8BE">..</span><span style="color:#C6D0F5"> word</span></span>
<span class="line"><span style="color:#C6D0F5">    vim.fn.</span><span style="color:#8CAAEE;font-style:italic">setreg</span><span style="color:#C6D0F5">(</span><span style="color:#A6D189">'+'</span><span style="color:#C6D0F5">, result)</span></span>
<span class="line"><span style="color:#CA9EE6">end</span></span></code></pre>
<h1 id="tablegen"><a aria-hidden="true" tabindex="-1" href="#tablegen"><span class="icon icon-link"></span></a>tablegen</h1>
<p>For a short overview on tablegen, the <a href="https://llvm.org/docs/TableGen/" rel="nofollow" target="_blank">LLVM tablegen docs</a> cannot be more succint:</p>
<blockquote>
<p>TableGen’s purpose is to help a human develop and maintain records of domain-specific information.
... [reducing] the amount of duplication, the chance of error, and [making] it easier to structure domain specific information.</p>
</blockquote>
<p>.td (tablegen) files are ubiquitous in the LLVM world; if you have contributed to LLVM, chances are you've read a <code>.td</code> file.
If something's wrong with a tablegen, a programmer needs to understand at least the debugging techniques for a tablegen file.</p>
<p>When a .td file is table-generated, it spits out an .inc (<code>include</code>) file in the build folder</p>
<p>TODO: Mention a developer's love hate relationship with tablegen, for example, with Jeremy Kun's perspective on mlir's tablegen:</p>
<blockquote>
<p>It sounds nice, but I have a love hate relationship with tablegen. I personally find it to be unpleasant to use, primarily because it provides poor diagnostic information when you do things wrong. Today, though, I realize that my part of my frustration came from having the wrong initial mindset around tablegen. I thought, incorrectly, that tablegen was an abstraction layer. That is, I could write my tablegen files, build them, and only think about the parts of the generated code that I needed to implement.</p>
</blockquote>
<p>Personally, my experience with tablegen in the backend is akin to this:
for certain issues/problems, if you don't use tablegen, then you'll end up writing more code and spend more time/effort maintaining said code.</p>
<h2 id="grepping-tablegen"><a aria-hidden="true" tabindex="-1" href="#grepping-tablegen"><span class="icon icon-link"></span></a>Grepping tablegen</h2>
<p>At the time of writing this article, with version 14.1.1, ripgrep provides a way to filter out the file type so often times, you can use this to exclusively search for ripgrep.</p>
<pre><code>rg --type-add 'td:*.td' -ttd "&#x3C;What you want to search here" &#x3C;where you want to search>
</code></pre>
<h1 id="gitbisect"><a aria-hidden="true" tabindex="-1" href="#gitbisect"><span class="icon icon-link"></span></a>gitbisect</h1>
<p>It is quite frustrating that on a big repository, after ~100,000 commits from you and a few thousands contributors, you're asked
to solve a bug that happen on some new releases but not older ones. You say to yourself: "Welp I can't really build the llvm codebase
and run the test case 100,000 times to find the commit that causes the bugs."</p>
<p>Instead, with git-bisect's <code>binary search to find the commit that introduced a bug,</code> you can reduce this down to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>100</mn><mo separator="true">,</mo><mn>000</mn><mo stretchy="false">)</mo><mo>=</mo><mn>16.61</mn></mrow><annotation encoding="application/x-tex">log_2(100,000) = 16.61</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">16.61</span></span></span></span></p>
<p>should spawn its own shell so git bisect run is not affected</p>
<p>The rest of this gitbisect section focuses on helping you set up a basic script to automate the bug finding process with gitbisect.</p>
<h1 id="llvm-reduce"><a aria-hidden="true" tabindex="-1" href="#llvm-reduce"><span class="icon icon-link"></span></a>llvm-reduce</h1>
<p>Often, when a bug fails on a big test case, it is imperative to <code>reduce</code> the test case to a smaller one, so that other people can pinpoint exactly where
exactly the bug occurs.</p>
<p>llvm-reduce works on the programmer telling it what test case execution is <code>interesting.</code> And in a unix fashion, if something returns a non-zero code,
it is considered <code>interesting.</code> We can then blah blah blah</p>
<pre><code>--- BEFORE llvm-reduce
define i64 @stest_f64i64(double %x) {
entry:
  %conv = fptosi double %x to i128
  %0 = icmp slt i128 %conv, 9223372036854775807
  %spec.store.select = select i1 %0, i128 %conv, i128 9223372036854775807
  %1 = icmp sgt i128 %spec.store.select, -9223372036854775808
  %spec.store.select7 = select i1 %1, i128 %spec.store.select, i128 -9223372036854775808
  %conv6 = trunc i128 %spec.store.select7 to i64
  ret i64 %conv6
}

--- AFTER llvm-reduce
define &#x3C;2 x i128> @stest_f64i64() {
entry:
  %conv = fptosi &#x3C;2 x double> splat (double 0x7FF8000000000000) to &#x3C;2 x i128>
  ret &#x3C;2 x i128> %conv
}
</code></pre>
<h1 id="rsp_bisectpy"><a aria-hidden="true" tabindex="-1" href="#rsp_bisectpy"><span class="icon icon-link"></span></a>rsp_bisect.py</h1>
<p>rsp file is response file? not sure how relevant this will be or if newcomers will ever use it</p>
<h1 id="llvm-extract"><a aria-hidden="true" tabindex="-1" href="#llvm-extract"><span class="icon icon-link"></span></a>llvm-extract</h1>
<h1 id="reading-skills-experience-or-think-harder"><a aria-hidden="true" tabindex="-1" href="#reading-skills-experience-or-think-harder"><span class="icon icon-link"></span></a>Reading skills, experience, (or think harder)</h1>
<p>Yep yep, you read it right</p>
<p>debugging also comes from lang ref:
for example, if you're creating a new instruction from another instruction, for example: llvm.reduce.and i32 to i1
i</p>
<h1 id="asking-people"><a aria-hidden="true" tabindex="-1" href="#asking-people"><span class="icon icon-link"></span></a>Asking people</h1>
<h1 id="acknowledgments"><a aria-hidden="true" tabindex="-1" href="#acknowledgments"><span class="icon icon-link"></span></a>Acknowledgments</h1></div></article></div><!--$--><!--/$--></div><button class="bottom-4 right-4 fixed"><div class="inline text-2xl font-bold border-black border-2 rounded  p-0 m-0 h-100 w-100">⇡⇡</div></button><footer class="footer self-center justify-center gap-2 pt-4 items-center italic "><p>Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)</p></footer><script src="/_next/static/chunks/webpack-47bbed6067fe1d45.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[6874,[\"874\",\"static/chunks/874-437a265a67d6cfee.js\",\"880\",\"static/chunks/app/posts/%5Bid%5D/page-f0f7551128d4c13f.js\"],\"\"]\n3:I[7555,[],\"\"]\n4:I[1295,[],\"\"]\n5:I[7921,[\"874\",\"static/chunks/874-437a265a67d6cfee.js\",\"63\",\"static/chunks/63-63ed21df6f1fc3e7.js\",\"177\",\"static/chunks/app/layout-05e345a4cd50b3e1.js\"],\"default\"]\n7:I[9665,[],\"OutletBoundary\"]\n9:I[4911,[],\"AsyncMetadataOutlet\"]\nb:I[9665,[],\"ViewportBoundary\"]\nd:I[9665,[],\"MetadataBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[8393,[],\"\"]\n:HL[\"/_next/static/media/7385e8d9d3c5518f-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n:HL[\"/_next/static/css/3b37cf79ceb9ce8f.css\",\"style\"]\n:HL[\"/_next/static/css/3864b451a61e4546.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"otQaMgK0aP3dP1u0qOC-a\",\"p\":\"\",\"c\":[\"\",\"posts\",\"hitchhiker_guide_to_llvm_debugging\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"hitchhiker_guide_to_llvm_debugging\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3b37cf79ceb9ce8f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"px-4 py-4\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_d4e0c8 flex flex-col min-h-screen\",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex justify-center items-center py-4 \",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold\",\"children\":\"Jasmine Tang\"}]}]}],[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L5\",null,{}],[\"$\",\"footer\",null,{\"className\":\"footer self-center justify-center gap-2 pt-4 items-center italic \",\"children\":[\"$\",\"p\",null,{\"children\":\"Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)\"}]}]]}]}]]}],{\"children\":[\"posts\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"hitchhiker_guide_to_llvm_debugging\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3864b451a61e4546.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L7\",null,{\"children\":[\"$L8\",[\"$\",\"$L9\",null,{\"promise\":\"$@a\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$e\",null,{\"fallback\":null,\"children\":\"$Lf\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"12:I[8175,[],\"IconMark\"]\n11:T9134,"])</script><script>self.__next_f.push([1,"\u003cnav class=\"toc\"\u003e\u003col class=\"toc-level toc-level-1\"\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#prologue\"\u003ePrologue\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#introduction\"\u003eIntroduction\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#resources\"\u003eResources\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#compiling-and-testing-time\"\u003eCompiling and testing time\u003c/a\u003e\u003col class=\"toc-level toc-level-2\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#release--assertion--debug\"\u003e(Release + Assertion) + (Debug)\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#build-your-targetsubproject-only\"\u003eBuild your target/subproject only\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#use-llvm-release-compilers\"\u003eUse LLVM-release compilers\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#ccache-ninja-and-lld\"\u003eccache, ninja and LLD\u003c/a\u003e\u003col class=\"toc-level toc-level-3\"\u003e\u003cli class=\"toc-item toc-item-h3\"\u003e\u003ca class=\"toc-link toc-link-h3\" href=\"#ccache\"\u003eccache\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h3\"\u003e\u003ca class=\"toc-link toc-link-h3\" href=\"#ninja\"\u003eNinja\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h3\"\u003e\u003ca class=\"toc-link toc-link-h3\" href=\"#lld\"\u003eLLD\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#grepping\"\u003eGrepping\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#git-potpourri-on-the-pull-requests\"\u003eGit potpourri on the pull requests\u003c/a\u003e\u003col class=\"toc-level toc-level-2\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#blame--show-a-commit\"\u003eBlame \u0026#x26; show a commit\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#grepping-it\"\u003egrepping it\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#godbolt--debug-only--print-after-all--print-changed-and-all-that\"\u003egodbolt, -debug-only, -print-after-all, -print-changed and all that\u003c/a\u003e\u003col class=\"toc-level toc-level-2\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#inspecting-ir-changes\"\u003eInspecting IR changes\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#cutting-out-the-noise\"\u003eCutting out the noise\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#deep-diving-into-a-specific-passes\"\u003eDeep diving into a specific passes\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#lldb-and-debuggers\"\u003elldb and debuggers\u003c/a\u003e\u003col class=\"toc-level toc-level-2\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#default\"\u003eDefault\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#dump\"\u003edump.*\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#llvmutilslldbdataformatterspy\"\u003ellvm/utils/lldbDataFormatters.py\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#conditional-breakpoints\"\u003eConditional breakpoints\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#tablegen\"\u003etablegen\u003c/a\u003e\u003col class=\"toc-level toc-level-2\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#grepping-tablegen\"\u003eGrepping tablegen\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#gitbisect\"\u003egitbisect\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#llvm-reduce\"\u003ellvm-reduce\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#rsp_bisectpy\"\u003ersp_bisect.py\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#llvm-extract\"\u003ellvm-extract\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#reading-skills-experience-or-think-harder\"\u003eReading skills, experience, (or think harder)\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#asking-people\"\u003eAsking people\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#acknowledgments\"\u003eAcknowledgments\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/nav\u003e\u003ch1 id=\"prologue\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#prologue\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ePrologue\u003c/h1\u003e\n\u003cp\u003eHello everyone, how's everybody doing? I'm still chugging away at solving LLVM issues at Igalia :) Fall and winter's\ncoming soon, and by the time this blog's up, I will be turning a year older. Welp, another year a few\nmore blogs am i right hahahahhaa.\u003c/p\u003e\n\u003cp\u003eA few weekends ago, I went up to Thousand Oaks and Malibu beach to visit my friend from Berkeley and then took an Amtrak with a date to\nSan Diego. Isn't life just beautiful like that? I couldn't have asked for more.\u003c/p\u003e\n\u003cp\u003eThis blog will be detailing my debugging methods since working on LLVM. For the foreseeable future (while the blog\ntitle has [ONGOING]), this blog will be continually updated with new knowledge of mine for any shortcomings as I'm still new to LLVM.\u003c/p\u003e\n\u003cp\u003eFor external reviewers and discussion of this blog and others, you can join the discord server \u003ca href=\"https://discord.gg/mvdVEqDQxn\" rel=\"nofollow\" target=\"_blank\"\u003ehere\u003c/a\u003e or the discord link in my front page.\u003c/p\u003e\n\u003cp\u003eFor internal reviewers at Igalia, you can also dm me on Matrix, up to your preferences!\u003c/p\u003e\n\u003cp\u003eAs tradition, here's a \u003ca href=\"https://www.youtube.com/watch?v=kvqfHcgIagI\" rel=\"nofollow\" target=\"_blank\"\u003esong\u003c/a\u003e for interested readers :) I hope everyone enjoys :)\u003c/p\u003e\n\u003ch1 id=\"introduction\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#introduction\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eIntroduction\u003c/h1\u003e\n\u003cp\u003eDebugging has always been a quintessential tool in a software engineer's toolboxes.\u003c/p\u003e\n\u003cp\u003eAs a piece of software or framework gets more complicated, the flow of a program invariantly gets more complex, which requires software\nengineers to careful and methodically investigate an issue/bug instead of blindly following one's instinct.\u003c/p\u003e\n\u003cp\u003eIn this sense, although the article talks about debugging, the article inherently provides a sample of the author's problem-solving toolbox.\u003c/p\u003e\n\u003cp\u003eI hope this helps junior LLVM developer or low level developer just starting out in their journey!\u003c/p\u003e\n\u003cp\u003eWelp, let's dig in!\u003c/p\u003e\n\u003ch1 id=\"resources\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#resources\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eResources\u003c/h1\u003e\n\u003cp\u003eIn writing the blog, I utilize these resources, including, but not excluding:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.npopov.com/2023/10/22/How-to-reduce-LLVM-crashes.html\" rel=\"nofollow\" target=\"_blank\"\u003eHow to reduce LLVM crashes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\" rel=\"nofollow\" target=\"_blank\"\u003eClear step by step to oneshot debugging any LLVM issue with ChatGPT\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://git-scm.com/doc\" rel=\"nofollow\" target=\"_blank\"\u003eGit manual\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://llvm.org/docs/LangRef.html\" rel=\"nofollow\" target=\"_blank\"\u003eLLVM lang ref\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"compiling-and-testing-time\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#compiling-and-testing-time\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eCompiling and testing time\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eNote\u003c/strong\u003e: Some parts of the section takes inspiration from Nikita Popov's \u003ca href=\"https://developers.redhat.com/articles/2022/12/20/how-contribute-llvm\" rel=\"nofollow\" target=\"_blank\"\u003eHow to contribute to LLVM\u003c/a\u003e\nand LLVM's \u003ca href=\"https://llvm.org/docs/CMake.html\" rel=\"nofollow\" target=\"_blank\"\u003eBuilding LLVM with CMake\u003c/a\u003e. I highly recommend you take a few minutes to read through them!\u003c/p\u003e\n\u003cp\u003eCompile time on a big codebase has always been a pain point for programmers. A few seconds here, a few minutes there, and you have wasted\nat least half an hour extra waiting to compile the LLVM repository.\u003c/p\u003e\n\u003cp\u003eOnce you hit compile, if you have to wait a while, your mind wanders away to other things and you start to drift away, thinking about other topics.\nPoint is, the context switching causes you to lose out on your focusing power.\u003c/p\u003e\n\u003cp\u003eThe following subsections then describes how to save time on your compiling and executing. This will reduce your development cycle\nand TODO\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/blogs/hitchhiker_guide_to_llvm_debugging/compile_meme.png\" alt=\"compile_meme\"\u003e\u003c/p\u003e\n\u003ch2 id=\"release--assertion--debug\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#release--assertion--debug\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e(Release + Assertion) + (Debug)\u003c/h2\u003e\n\u003cp\u003eA common rule of thumb to have is you build a codebase in Debug mode when you're in development, and then you build it in Release mode\nwhen shipping it out to users. But this is not always the case...\u003c/p\u003e\n\u003cp\u003eIf you're not stepping through the code with the LLDB debugger, chances are the trade-off of being in Debug mode; receiving\naccurate stack trace locations and source layout position is not worth it.\nDebug mode takes longer to compile and link, test cases with Debug mode are often compiled and ran slower.\u003c/p\u003e\n\u003cp\u003eRelease mode with assertion turned on, on the other hands, compiles and run tests blazingly fast as well as gives good diagnostics.\u003c/p\u003e\n\u003cp\u003eTherefore, it's very beneficial to have two build modes when contributing to LLVM:\u003c/p\u003e\n\u003cp\u003eYou can set the modes for your build by appending these two options when configuring CMake\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eDebug            : -DCMAKE_BUILD_TYPE=Debug\nRelease + Assert : -DCMAKE_BUILD_TYPE=Release -DLLVM_ENABLE_ASSERTIONS=ON\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"build-your-targetsubproject-only\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#build-your-targetsubproject-only\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eBuild your target/subproject only\u003c/h2\u003e\n\u003cp\u003eYou can also save on your development time by only building the subproject that are of interests to you.\u003c/p\u003e\n\u003cp\u003eFor example, if you're doing majority webassembly or x86, don't build RISCV on top of it. Some tablegen changes in common between RISCV and WebAssembly\nwill inevitably trigger compilation on the RISCV target, taking a dozen of seconds to compile. Enabling extra targets will also\nenable extra tests for that target.\u003c/p\u003e\n\u003cp\u003eThe flag to include/exclude subprojects is \u003ccode\u003eLLVM_TARGETS_TO_BUILD\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eFrom LLVM:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSemicolon-separated list of targets to build, or all for building all targets. Case-sensitive. Defaults to all. Example: -DLLVM_TARGETS_TO_BUILD=\"X86;PowerPC\".\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe full list, as of March 2023, is: AArch64, AMDGPU, ARM, AVR, BPF, Hexagon, Lanai, LoongArch, Mips, MSP430, NVPTX, PowerPC, RISCV, Sparc, SystemZ, VE, WebAssembly, X86, XCore.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"use-llvm-release-compilers\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#use-llvm-release-compilers\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eUse LLVM-release compilers\u003c/h2\u003e\n\u003cp\u003eIf you're using a package manager's \u003ccode\u003eclang\u003c/code\u003e or a \u003ccode\u003eclang\u003c/code\u003e that comes with your operating system, chances are you're losing out\non development time.\u003c/p\u003e\n\u003cp\u003eWith \u003ca href=\"https://en.wikipedia.org/wiki/Profile-guided_optimization\" rel=\"nofollow\" target=\"_blank\"\u003ePGO\u003c/a\u003e, \u003ca href=\"https://research.facebook.com/publications/bolt-a-practical-binary-optimizer-for-data-centers-and-beyond/\" rel=\"nofollow\" target=\"_blank\"\u003eBOLT\u003c/a\u003e\nand various tips and tricks turned on,\nLLVM maintainer and volunteers have been hard at work optimizing the LLVM official release version of clang\nto be highly optimized for the LLVM compiler development experiment. How good is it? You can see for yourself with the claim from\nthe BOLT paper\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFor datacenter applications, BOLT achieves up to 7.0% performance speedups on top of profile-guided function reordering and LTO.\nFor the GCC and Clang compilers, our evaluation shows that BOLT speeds up their binaries by up to 20.4% on top of FDO and LTO,\nand up to 52.1% if the binaries are built without FDO and LTO.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eUnfortunately, for MacOS users, BOLT only comes with Linux x86 and AArch64. However, I'd still recommend downloading your\nOS's version of the compiler from LLVM's \u003ca href=\"https://github.com/llvm/llvm-project/releases\" rel=\"nofollow\" target=\"_blank\"\u003erelease page\u003c/a\u003e as anecdotally, I can\nstill feel some extra perform when compiling LLVM.\u003c/p\u003e\n\u003cp\u003eAfter you've downloaded the LLVM release compiler to a folder, you can use it in your CMake configuration command as follow\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-DCMAKE_C_COMPILER=$HOME/Developer/igalia/LLVM-20.1.7-macOS-ARM64/bin/clang \\\n-DCMAKE_CXX_COMPILER=$HOME/Developer/igalia/LLVM-20.1.7-macOS-ARM64/bin/clang++\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eprovided that you download and extract it to a folder of \u003ccode\u003e$HOME/Developer/igalia/LLVM-20.1.7-macOS-ARM64\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eBtw, I learned about this through my conversation with David Spicket:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ebdbt: i'm new grad and joining a company as a compiler engineer, would compiling a new, seperate compiler that's BOLT-activated specifically for compiling compiler makes sense?\nIt will give me a sizable reduction in compile time and allow for faster iteration but i'm not sure if there will be errors when using the special version? any insights would be appreciated\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDavid Spicket: At least for Linux x86 and AArch64, LLVM's release archives on GitHub are already BOLT-ed (you can check with objdump -h clang | grep bolt). So if there are potential issues, we're all at risk 🙂\nIf you want to try BOLT-ing something yourself, \u003ca href=\"https://github.com/llvm/llvm-project/blob/main/bolt/docs/OptimizingClang.md\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/llvm/llvm-project/blob/main/bolt/docs/OptimizingClang.md\u003c/a\u003e seems like a good place to start (I've not done this myself).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"ccache-ninja-and-lld\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#ccache-ninja-and-lld\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eccache, ninja and LLD\u003c/h2\u003e\n\u003cp\u003eHaha, you thought we were done huh. Even on top of all this, we can use extra tools to squeeze out\nextra time in our day-to-day work.\u003c/p\u003e\n\u003ch3 id=\"ccache\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#ccache\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eccache\u003c/h3\u003e\n\u003cp\u003eFor increment builds, ccache \"speeds up recompilation by caching previous compilations and detecting when the same compilation is being done again.\"\u003c/p\u003e\n\u003cp\u003eIn my use case, when compiling the codebase from different commits (because some branches are opened a few weeks ago and some are opened recently after I have \u003ccode\u003egit pull\u003c/code\u003e from upstream),\ncompiling the same \u003ccode\u003ebuild\u003c/code\u003e folder would often take a lot of time. This is where ccache comes in.\u003c/p\u003e\n\u003cp\u003eYou can use the LLVM's flag for ccache together with other CMake flags \u003ccode\u003e-DLLVM_CCACHE_BUILD=true\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eIn addition to this, you can create a ccache configuration in \u003ccode\u003e$HOME/.ccache/ccache.conf\u003c/code\u003e, allowing more flexibility and power to ccache.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003efile_clone = true\ninode_cache = true\nmax_size = 200G\nbase_dir = /\nabsolute_paths_in_stderr = true\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBelow, I'll provide the explanation for each configuration option.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003efile_clone = true\u003c/code\u003e: performs copy-on-write if possible, improving the caching performance.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003einode_cache = true\u003c/code\u003e: instruct ccache to cache a file based on its device, inode and timestamps. This cuts down on time spent hashing\nfiles and therefore improves caching performance since some file in LLVM can contain tens of thousands of lines.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emax_size = 200G\u003c/code\u003e: allocates 200 gigabyte of storage on your computer for ccache to use.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebase_dir = /\u003c/code\u003e: allows caching of all directories (any directory's path that starts with /).\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eabsolute_paths_in_stderr\u003c/code\u003e: instruct ccache to rewrite relative paths to absolute paths in a compiler's textual output in lieu of\nincorrect relative paths in warning or error messages.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI want to thank my colleague Alex Bradbury for introducing me to these options :)\u003c/p\u003e\n\u003ch3 id=\"ninja\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#ninja\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eNinja\u003c/h3\u003e\n\u003cp\u003eNinja's a build system thats focused on speed and is designed \u003ccode\u003erun builds as fast as possible.\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eFrom Ninja's wikipedia:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIn essence, Ninja is meant to replace Make, which is slow when performing incremental (or no-op) builds. This can considerably slow down developers working on large projects, such as Google Chrome which compiles 40,000 input files into a single executable. In fact, Google Chrome is a main user and motivation for Ninja. It's also used to build Android (via Makefile translation by Kati), and is used by most developers working on LLVM.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eYou can opt to use Ninja when configuring CMake with \u003ccode\u003e-GNinja\u003c/code\u003e and build your code with another seperate command\n\u003ccode\u003eninja -C \u0026#x3C;your_build_folder\u003e \u0026#x3C;your_build_target\u003e\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eFor example, to build the codebase and test everything:\u003c/p\u003e\n\u003cpre class=\"shiki catppuccin-frappe\" style=\"background-color:#303446;color:#c6d0f5\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003eninja\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e -C\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e build\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e check-all\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"lld\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#lld\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eLLD\u003c/h3\u003e\n\u003cp\u003eFrom the LLVM's LLD page:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eLLD is a linker from the LLVM project that is a drop-in replacement for system linkers and runs much faster than them.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIn fact, it is so fast that I think it's a necessity to enable this by default when developing LLVM, especially when your\nlld executable comes from the LLVM release page that has PGO and BOLT enabled, providing even faster linking time.\u003c/p\u003e\n\u003cp\u003eAs of Monday, August 11, 2025, here is the comparison from the LLVM LLD page, with the percentage difference between ld, gold and lld.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eProgram\u003c/th\u003e\u003cth\u003eOutput size\u003c/th\u003e\u003cth\u003eGNU ld (time)\u003c/th\u003e\u003cth\u003eGNU gold w/ threads (time)\u003c/th\u003e\u003cth\u003elld w/ threads (time)\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003effmpeg dbg\u003c/td\u003e\u003ctd\u003e92 MiB\u003c/td\u003e\u003ctd\u003e1.72s, (4.91x)\u003c/td\u003e\u003ctd\u003e1.01s, (2.89x)\u003c/td\u003e\u003ctd\u003e0.35s  (1.00x)\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003emysqld dbg\u003c/td\u003e\u003ctd\u003e154 MiB\u003c/td\u003e\u003ctd\u003e8.50s, (12.50x)\u003c/td\u003e\u003ctd\u003e2.68s, (3.94x)\u003c/td\u003e\u003ctd\u003e0.68s  (1.00x)\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eclang dbg\u003c/td\u003e\u003ctd\u003e1.67 GiB\u003c/td\u003e\u003ctd\u003e104.03s, (19.70x)\u003c/td\u003e\u003ctd\u003e23.49s, (4.45x)\u003c/td\u003e\u003ctd\u003e5.28s  (1.00x)\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003echromium dbg\u003c/td\u003e\u003ctd\u003e1.14 GiB\u003c/td\u003e\u003ctd\u003e209.05s, (12.52x)\u003c/td\u003e\u003ctd\u003e60.82s, (3.64x)\u003c/td\u003e\u003ctd\u003e16.70s  (1.00x)\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eYou can enable the LLD linker with \u003ccode\u003e-DLLVM_USE_LINKER=lld\u003c/code\u003e\u003c/p\u003e\n\u003ch1 id=\"grepping\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#grepping\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eGrepping\u003c/h1\u003e\n\u003cp\u003eWell, now all that's out of the way, let's talk about grepping.\u003c/p\u003e\n\u003cp\u003eIn a big and unfamiliar codebase, sometimes, you just don't have much of a clue on how things go. In cases like this, you can\nstart querying random keywords that are related to your issue and work your way from there.\u003c/p\u003e\n\u003cp\u003eSometimes, it just so happens that when you're querying a function that's used in a test case via an \u003ca href=\"https://en.wikipedia.org/wiki/Language_Server_Protocol\" rel=\"nofollow\" target=\"_blank\"\u003eLSP\u003c/a\u003e,\nthe LSP gives you the source from the OS compiler or the LLVM release compiler (since you built the project with it), grepping might be\none of the few ways to get you to the function's source in the repository instead.\u003c/p\u003e\n\u003cp\u003eIn my case, I opt for ripgrep instead of grep due to the \u003ca href=\"https://github.com/BurntSushi/ripgrep?tab=readme-ov-file#quick-examples-comparing-tools\" rel=\"nofollow\" target=\"_blank\"\u003eperformance difference\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eWith such aforementioned importance, often in the following sections, I will try to provide how grepping integrates with each area.\u003c/p\u003e\n\u003ch1 id=\"git-potpourri-on-the-pull-requests\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#git-potpourri-on-the-pull-requests\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eGit potpourri on the pull requests\u003c/h1\u003e\n\u003cp\u003eFor a beginner in a codebase (even a seasoned programmer),\nthe ability to obtain more information and context,\nextending further than the code sitting in front of them, is extremely helpful.\u003c/p\u003e\n\u003ch2 id=\"blame--show-a-commit\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#blame--show-a-commit\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eBlame \u0026#x26; show a commit\u003c/h2\u003e\n\u003cp\u003eWhen exploring a new area/file, I would often combine \u003ca href=\"https://git-scm.com/docs/git-blame\" rel=\"nofollow\" target=\"_blank\"\u003egit blame\u003c/a\u003e together with \u003ca href=\"https://git-scm.com/docs/git-show\" rel=\"nofollow\" target=\"_blank\"\u003egit show\u003c/a\u003e\nto obtain more context for what I'm working with.\u003c/p\u003e\n\u003cp\u003eThe workflow is: \u003ccode\u003egit blame\u003c/code\u003e the file -\u003e get the commit hash for the line I'm interested in -\u003e input the commit hash to \u003ccode\u003egit show\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eIn investigating an issue through commits, it's also helpful to look up on the internet for the commit's pull requests, either through GitHub or through reviews.llvm.org.\nFor example, in this \u003ca href=\"https://reviews.llvm.org/D124685?id=431828#inline-1213666\" rel=\"nofollow\" target=\"_blank\"\u003epull request\u003c/a\u003e, the author and reviewers have added a TODO, but without reading the PRs,\nthe TODO would seem very unclear and hazy, leaving code readers wanting more context.\u003c/p\u003e\n\u003cp\u003eIn other words, exploring code is the first step, after that, commit messages provides greater additional context on the problems being solved and finally, the pull request\nand the \u003ccode\u003ereviews.llvm.org\u003c/code\u003e provides opinions and directives.\u003c/p\u003e\n\u003ch2 id=\"grepping-it\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#grepping-it\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003egrepping it\u003c/h2\u003e\n\u003cp\u003eWith trying to explore what's happening for a subproject/subsection in LLVM, you can also utilize grepping in git without going through the github online gui.\u003c/p\u003e\n\u003cp\u003eBelows shows a picture of me applying git grep to the topic of WebAssembly where theres a mention of either \"fold\" or \"DAG\" via this command:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003egit log --grep='WebAssembly' --grep='fold\\|DAG' --all-match\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/blogs/hitchhiker_guide_to_llvm_debugging/git_grep_wasm_fold_dag.png\" alt=\"showing git grep\"\u003e\u003c/p\u003e\n\u003ch1 id=\"godbolt--debug-only--print-after-all--print-changed-and-all-that\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#godbolt--debug-only--print-after-all--print-changed-and-all-that\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003egodbolt, -debug-only, -print-after-all, -print-changed and all that\u003c/h1\u003e\n\u003cp\u003eIf you haven't heard of godbolt, think of it as a way for compiler developer to say no to \"but but but it works on my machineeee :('\u003c/p\u003e\n\u003cp\u003eFormally, godbolt is \u003ccode\u003ean interactive online compiler which shows the assembly output of compiled C++, Rust, Go (and many more) code.\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eButtt, such a simple description couldn't possibly do the site its justice bla bla blah\u003c/p\u003e\n\u003cp\u003eTODO: HEY JASMINE: Ok, the mindset here is while providing users how to use godbolt, I should also provide a way to do this via the command line.\u003c/p\u003e\n\u003ch2 id=\"inspecting-ir-changes\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#inspecting-ir-changes\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eInspecting IR changes\u003c/h2\u003e\n\u003cp\u003eTODO: Explain this in a way that's akin to -print-changed\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/blogs/hitchhiker_guide_to_llvm_debugging/godbolt_show_opt.png\" alt=\"godbolt_show_opt\"\u003e\u003c/p\u003e\n\u003ch2 id=\"cutting-out-the-noise\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#cutting-out-the-noise\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eCutting out the noise\u003c/h2\u003e\n\u003cp\u003e-print-changed\u003c/p\u003e\n\u003ch2 id=\"deep-diving-into-a-specific-passes\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#deep-diving-into-a-specific-passes\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eDeep diving into a specific passes\u003c/h2\u003e\n\u003cp\u003eAfter you've filtered out the specific pass that you think are affecting your\u003c/p\u003e\n\u003ch1 id=\"lldb-and-debuggers\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#lldb-and-debuggers\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003elldb and debuggers\u003c/h1\u003e\n\u003cp\u003eA quick google on \"gdb versus lldb\" would give a similar generic answer to how similar the two tools are and it's often up to personal\npreferences. This article won't try to persuade you to use either gdb or lldb, but perhaps it will introduce you more to the strong integration\nbetween lldb and the LLVM codebase :)\u003c/p\u003e\n\u003ch2 id=\"default\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#default\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eDefault\u003c/h2\u003e\n\u003cp\u003elldb has auto repeat on when you press sth then you press return\u003c/p\u003e\n\u003ch2 id=\"dump\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#dump\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003edump.*\u003c/h2\u003e\n\u003cp\u003eThe \u003ccode\u003edump()\u003c/code\u003e helper function in llvm is basically a pretty printer for\u003c/p\u003e\n\u003cp\u003eA lot of the time, when you perform\nripgrep \u003ccode\u003evoid dump.*\\(\\) \u003c/code\u003e\nLoop class has dumpVerbose\u003c/p\u003e\n\u003cp\u003eRegAlloc class has dumpState\u003c/p\u003e\n\u003ch2 id=\"llvmutilslldbdataformatterspy\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#llvmutilslldbdataformatterspy\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ellvm/utils/lldbDataFormatters.py\u003c/h2\u003e\n\u003cp\u003elldbDataFormatters.py (LDF) is a python script to integrate with LLDB. In LLDB, when you print a specific LLVM data structure\nthat doesn't have the \u003ccode\u003edump()\u003c/code\u003e helper function, things can get a bit messy due to how the debugger's treating the data structure as\na pointer only.\u003c/p\u003e\n\u003cp\u003eFor LLVM-specific data structures, LDF provides helpful pretty printer for DenseMap, DenseSet, StringRef, SmallVector, SmallStrings\u003c/p\u003e\n\u003cp\u003eTo utilize the script, once you fire up LLDB, you can provide LLDB with \u003cspan class=\"shiki catppuccin-frappe\" style=\"background-color:#303446;color:#c6d0f5\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#E78284;font-style:italic\"\u003ecommand\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e script\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e import\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e PathToScript/lldbDataFormatters.py\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/span\u003e\nwhere PathToScript is the directory path to LDF.\u003c/p\u003e\n\u003cp\u003eFor example, if you're debugging in \u003ccode\u003ellvm-project\u003c/code\u003e, which houses the lldbDataFormatters naturally in llvm/utils:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\n(lldb) command script import llvm/utils/lldbDataFormatters.py\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere's a picture showing the before and after importing the formatter script:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/blogs/hitchhiker_guide_to_llvm_debugging/showcase_lldbDataFormatters.png\" alt=\"showcase_lldbformatters\"\u003e\u003c/p\u003e\n\u003cp\u003eAlas, a programmer would not be a programmer if not for their automation. It would be an inconvenience (and a detriment to their productivity)\nif a programmer were supposed to remember the script import command and then remember to type it in\nevery time.\u003c/p\u003e\n\u003cp\u003eInstead, you can add this to \u003ccode\u003e.lldbinit\u003c/code\u003e in your home directory and let the computer perform said steps for you:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003escript\n\"llvm-project\" in os.getcwd() and lldb.debugger.HandleCommand(\"command script import llvm/utils/lldbDataFormatters.py\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"conditional-breakpoints\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conditional-breakpoints\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eConditional breakpoints\u003c/h2\u003e\n\u003cp\u003ePersonally, I set up a keymap in my neovim so I don't have to type so much. Here's the lua code for the keymap\u003c/p\u003e\n\u003cpre class=\"shiki catppuccin-frappe\" style=\"background-color:#303446;color:#c6d0f5\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003elocal\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003e yank_for_conditional_break\u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#CA9EE6\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e ()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003e    local\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e path \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e vim.fn.\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003eexpand\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e'%:.'\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003e    local\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e line \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e vim.fn.\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003eline\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e'.'\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003e    local\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e word \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e vim.fn.\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003eexpand\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e\"\u0026#x3C;cword\u003e\"\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003e    local\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e result \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e 'breakpoint set --file '\u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e path \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e ' --line ' \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e line \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e ' --condition ' \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F4B8E4\"\u003e\\'\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e' \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e word\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#C6D0F5\"\u003e    vim.fn.\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003esetreg\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e'+'\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e, result)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003eend\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"tablegen\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#tablegen\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003etablegen\u003c/h1\u003e\n\u003cp\u003eFor a short overview on tablegen, the \u003ca href=\"https://llvm.org/docs/TableGen/\" rel=\"nofollow\" target=\"_blank\"\u003eLLVM tablegen docs\u003c/a\u003e cannot be more succint:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eTableGen’s purpose is to help a human develop and maintain records of domain-specific information.\n... [reducing] the amount of duplication, the chance of error, and [making] it easier to structure domain specific information.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e.td (tablegen) files are ubiquitous in the LLVM world; if you have contributed to LLVM, chances are you've read a \u003ccode\u003e.td\u003c/code\u003e file.\nIf something's wrong with a tablegen, a programmer needs to understand at least the debugging techniques for a tablegen file.\u003c/p\u003e\n\u003cp\u003eWhen a .td file is table-generated, it spits out an .inc (\u003ccode\u003einclude\u003c/code\u003e) file in the build folder\u003c/p\u003e\n\u003cp\u003eTODO: Mention a developer's love hate relationship with tablegen, for example, with Jeremy Kun's perspective on mlir's tablegen:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt sounds nice, but I have a love hate relationship with tablegen. I personally find it to be unpleasant to use, primarily because it provides poor diagnostic information when you do things wrong. Today, though, I realize that my part of my frustration came from having the wrong initial mindset around tablegen. I thought, incorrectly, that tablegen was an abstraction layer. That is, I could write my tablegen files, build them, and only think about the parts of the generated code that I needed to implement.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ePersonally, my experience with tablegen in the backend is akin to this:\nfor certain issues/problems, if you don't use tablegen, then you'll end up writing more code and spend more time/effort maintaining said code.\u003c/p\u003e\n\u003ch2 id=\"grepping-tablegen\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#grepping-tablegen\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eGrepping tablegen\u003c/h2\u003e\n\u003cp\u003eAt the time of writing this article, with version 14.1.1, ripgrep provides a way to filter out the file type so often times, you can use this to exclusively search for ripgrep.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003erg --type-add 'td:*.td' -ttd \"\u0026#x3C;What you want to search here\" \u0026#x3C;where you want to search\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"gitbisect\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#gitbisect\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003egitbisect\u003c/h1\u003e\n\u003cp\u003eIt is quite frustrating that on a big repository, after ~100,000 commits from you and a few thousands contributors, you're asked\nto solve a bug that happen on some new releases but not older ones. You say to yourself: \"Welp I can't really build the llvm codebase\nand run the test case 100,000 times to find the commit that causes the bugs.\"\u003c/p\u003e\n\u003cp\u003eInstead, with git-bisect's \u003ccode\u003ebinary search to find the commit that introduced a bug,\u003c/code\u003e you can reduce this down to \u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003eg\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmn\u003e100\u003c/mn\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmn\u003e000\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e16.61\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003elog_2(100,000) = 16.61\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eo\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003eg\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e100\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e000\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e16.61\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003eshould spawn its own shell so git bisect run is not affected\u003c/p\u003e\n\u003cp\u003eThe rest of this gitbisect section focuses on helping you set up a basic script to automate the bug finding process with gitbisect.\u003c/p\u003e\n\u003ch1 id=\"llvm-reduce\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#llvm-reduce\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ellvm-reduce\u003c/h1\u003e\n\u003cp\u003eOften, when a bug fails on a big test case, it is imperative to \u003ccode\u003ereduce\u003c/code\u003e the test case to a smaller one, so that other people can pinpoint exactly where\nexactly the bug occurs.\u003c/p\u003e\n\u003cp\u003ellvm-reduce works on the programmer telling it what test case execution is \u003ccode\u003einteresting.\u003c/code\u003e And in a unix fashion, if something returns a non-zero code,\nit is considered \u003ccode\u003einteresting.\u003c/code\u003e We can then blah blah blah\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e--- BEFORE llvm-reduce\ndefine i64 @stest_f64i64(double %x) {\nentry:\n  %conv = fptosi double %x to i128\n  %0 = icmp slt i128 %conv, 9223372036854775807\n  %spec.store.select = select i1 %0, i128 %conv, i128 9223372036854775807\n  %1 = icmp sgt i128 %spec.store.select, -9223372036854775808\n  %spec.store.select7 = select i1 %1, i128 %spec.store.select, i128 -9223372036854775808\n  %conv6 = trunc i128 %spec.store.select7 to i64\n  ret i64 %conv6\n}\n\n--- AFTER llvm-reduce\ndefine \u0026#x3C;2 x i128\u003e @stest_f64i64() {\nentry:\n  %conv = fptosi \u0026#x3C;2 x double\u003e splat (double 0x7FF8000000000000) to \u0026#x3C;2 x i128\u003e\n  ret \u0026#x3C;2 x i128\u003e %conv\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"rsp_bisectpy\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#rsp_bisectpy\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ersp_bisect.py\u003c/h1\u003e\n\u003cp\u003ersp file is response file? not sure how relevant this will be or if newcomers will ever use it\u003c/p\u003e\n\u003ch1 id=\"llvm-extract\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#llvm-extract\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ellvm-extract\u003c/h1\u003e\n\u003ch1 id=\"reading-skills-experience-or-think-harder\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#reading-skills-experience-or-think-harder\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eReading skills, experience, (or think harder)\u003c/h1\u003e\n\u003cp\u003eYep yep, you read it right\u003c/p\u003e\n\u003cp\u003edebugging also comes from lang ref:\nfor example, if you're creating a new instruction from another instruction, for example: llvm.reduce.and i32 to i1\ni\u003c/p\u003e\n\u003ch1 id=\"asking-people\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#asking-people\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eAsking people\u003c/h1\u003e\n\u003ch1 id=\"acknowledgments\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#acknowledgments\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eAcknowledgments\u003c/h1\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"py-12 flex flex-col items-center  justify-items-start mx-auto \",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/blog\",\"className\":\"flex justify-center text-4xl\",\"children\":[\"$\",\"h2\",null,{\"children\":\"My blog\"}]}],[\"$\",\"article\",null,{\"className\":\"p-8 prose pt-0.5 max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex justify-center text-2xl font-bold \",\"children\":[\"$\",\"h2\",null,{\"children\":\"[ONGOING] The hitchhiker's guide to LLVM debugging tools\"}]}],[\"$\",\"div\",null,{\"className\":\"flex justify-start text-xl font-bold underline\",\"children\":[\"$\",\"h4\",null,{\"children\":\"8888-08-08\"}]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$11\"}}]]}]]}]\n"])</script><script>self.__next_f.push([1,"a:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"[ONGOING] The hitchhiker's guide to LLVM debugging tools\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Jasmine introduces to readers debugging techniques that would benefit their LLVM development.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/_next/static/media/pfp5.0daa0f7d.jpeg\"}],[\"$\",\"$L12\",\"3\",{}]],\"error\":null,\"digest\":\"$undefined\"}\nf:\"$a:metadata\"\n"])</script></body></html>