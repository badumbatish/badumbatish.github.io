<!DOCTYPE html><!--cvACEl2ObyH2VbIgNhA7_--><html lang="en" class="px-4 py-4"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/7385e8d9d3c5518f-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="stylesheet" href="/_next/static/css/3b37cf79ceb9ce8f.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3864b451a61e4546.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-47bbed6067fe1d45.js"/><script src="/_next/static/chunks/4bd1b696-cf72ae8a39fa05aa.js" async=""></script><script src="/_next/static/chunks/964-05defa3e0b8af640.js" async=""></script><script src="/_next/static/chunks/main-app-98bd3314d8e089b7.js" async=""></script><script src="/_next/static/chunks/874-437a265a67d6cfee.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-f0f7551128d4c13f.js" async=""></script><script src="/_next/static/chunks/63-63ed21df6f1fc3e7.js" async=""></script><script src="/_next/static/chunks/app/layout-05e345a4cd50b3e1.js" async=""></script><meta name="next-size-adjust" content=""/><title>[ONGOING] Jasmine and the hitchhiker&#x27;s guide to LLVM&#x27;s debugging tools</title><meta name="description" content="Jasmine introduces to readers debugging techniques that would benefit their LLVM development."/><link rel="icon" href="/_next/static/media/pfp5.0daa0f7d.jpeg"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_d4e0c8 flex flex-col min-h-screen"><div hidden=""><!--$--><!--/$--></div><a href="/"><div class="flex justify-center items-center py-4 "><h1 class="text-4xl font-bold">Jasmine Tang</h1></div></a><div class="flex-1"><div class="py-12 flex flex-col items-center  justify-items-start mx-auto "><a class="flex justify-center text-4xl" href="/blog"><h2>My blog</h2></a><article class="p-8 prose pt-0.5 max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto"><div class="flex justify-center text-2xl font-bold "><h2>[ONGOING] Jasmine and the hitchhiker&#x27;s guide to LLVM&#x27;s debugging tools</h2></div><div class="flex justify-start text-xl font-bold underline"><h4>8888-08-08</h4></div><div><nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#prologue">Prologue</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#introduction">Introduction</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#grepping">Grepping</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#git-blame-and-pull-requests">Git blame and pull requests</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#godbolt--debug-only--print-after-all--print-changed-and-all-that">godbolt, -debug-only, -print-after-all, -print-changed and all that</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#lldb-and-debuggers">lldb and debuggers</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#dump">dump.*</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#llvmutilslldbdataformatterspy">llvm/utils/lldbDataFormatters.py</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#conditional-breakpoints">Conditional breakpoints</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#watchpoint">Watchpoint</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#gitbisect">gitbisect</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#llvm-reduce">llvm-reduce</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#rsp_bisectpy">rsp_bisect.py</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#tdiffpy">tdiff.py</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#llvm-extract">llvm-extract</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#reading-skills-experience-or-think-harder">Reading skills, experience, (or think harder)</a></li></ol></nav><h1 id="prologue"><a aria-hidden="true" tabindex="-1" href="#prologue"><span class="icon icon-link"></span></a>Prologue</h1>
<p>[TODO]: Jasmine you need to make your blog more personable, apparently there's a dude out plaglarising people's blog, despicable
<a href="https://www.linkedin.com/posts/alexander-logunov_deeplearning-microlearning-criticalthinking-activity-7353354281934020608-rE2J?utm_source=share&#x26;utm_medium=member_desktop&#x26;rcm=ACoAAC6QhfkBsgNZDMpt_hworID-CPWTYLaq4kg" rel="nofollow" target="_blank">https://www.linkedin.com/posts/alexander-logunov_deeplearning-microlearning-criticalthinking-activity-7353354281934020608-rE2J?utm_source=share&#x26;utm_medium=member_desktop&#x26;rcm=ACoAAC6QhfkBsgNZDMpt_hworID-CPWTYLaq4kg</a></p>
<p>Hello everyone, how's everybody doing? I'm still chugging away at solving LLVM issues at Igalia :) Fall and winter's
coming soon, and by the time this blog's up, I will be turning a year older. Welp, another year a few
more blogs am i right hahahahhaa.</p>
<p>This blog will be detailing my debugging methods since working on LLVM. For the foreseeable future (while the blog
title has [ONGOING]), this blog will be continually updated with new knowledge of mine, given that I'm still new in llvm</p>
<h1 id="introduction"><a aria-hidden="true" tabindex="-1" href="#introduction"><span class="icon icon-link"></span></a>Introduction</h1>
<h1 id="grepping"><a aria-hidden="true" tabindex="-1" href="#grepping"><span class="icon icon-link"></span></a>Grepping</h1>
<p>Something something grepping is very helpful</p>
<h1 id="git-blame-and-pull-requests"><a aria-hidden="true" tabindex="-1" href="#git-blame-and-pull-requests"><span class="icon icon-link"></span></a>Git blame and pull requests</h1>
<p>For a beginner in a codebase (even a seasoned programmer),
the ability to obtain more information and context,
extending further than the code sitting in front of them, is extremely helpful.</p>
<p>With git blame: <a href="https://git-scm.com/docs/git-blame" rel="nofollow" target="_blank">https://git-scm.com/docs/git-blame</a></p>
<p>It's also helpful to look up on the internet for the commit's pull requests, either through github or through reviews.llvm.org</p>
<p>for example <a href="https://reviews.llvm.org/D124685?id=431828#inline-1213666" rel="nofollow" target="_blank">https://reviews.llvm.org/D124685?id=431828#inline-1213666</a> has a TODO, but without reading the PRs, the TODO would seem very unclear and hazy.</p>
<p>In other words, reading code is the first step, after that, commit messages provides greater additional context on the problems being solved and finally, the pull request
and the reviews.llvm provides opinions and directives.</p>
<h1 id="godbolt--debug-only--print-after-all--print-changed-and-all-that"><a aria-hidden="true" tabindex="-1" href="#godbolt--debug-only--print-after-all--print-changed-and-all-that"><span class="icon icon-link"></span></a>godbolt, -debug-only, -print-after-all, -print-changed and all that</h1>
<p>If you haven't heard of godbolt, think of it as a way for compiler developer to say no to "but but but it works on my machineeee :('</p>
<h1 id="lldb-and-debuggers"><a aria-hidden="true" tabindex="-1" href="#lldb-and-debuggers"><span class="icon icon-link"></span></a>lldb and debuggers</h1>
<p>If</p>
<p>If you've ever heard of gdb (the GNU debugger) from gcc (the GNU compiler collection)
Give motivational thinking about</p>
<p>lldb has auto repeat on when you press sth then you press return</p>
<h2 id="dump"><a aria-hidden="true" tabindex="-1" href="#dump"><span class="icon icon-link"></span></a>dump.*</h2>
<p>The <code>dump()</code> helper function in llvm is basically a pretty printer for</p>
<p>A lot of the time, when you perform
ripgrep <code>void dump.*\(\) </code>
Loop class has dumpVerbose</p>
<p>RegAlloc class has dumpState</p>
<h2 id="llvmutilslldbdataformatterspy"><a aria-hidden="true" tabindex="-1" href="#llvmutilslldbdataformatterspy"><span class="icon icon-link"></span></a>llvm/utils/lldbDataFormatters.py</h2>
<p>lldbDataFormatters.py (LDF) is a python script to integrate with LLDB. In LLDB, when you print a specific LLVM data structure
that doesn't have the <code>dump()</code> helper function, things can get a bit messy due to how the debugger's treating the data structure as
a pointer only.</p>
<p>With LDF, you can</p>
<p>Load into LLDB with 'command script import llvm/utils/lldbDataFormatters.py'</p>
<pre><code>...
(lldb) command script import llvm/utils/lldbDataFormatters.py
...
</code></pre>
<p>Gives out pretty printer for DenseMap, DenseSet, StringRef, SmallVector, SmallStrings</p>
<p>Here's an picture showing the before and after</p>
<p><img src="/blogs/hitchhiker_guide_to_llvm_debugging/showcase_lldbDataFormatters.png" alt="showcase_lldbformatters"></p>
<h2 id="conditional-breakpoints"><a aria-hidden="true" tabindex="-1" href="#conditional-breakpoints"><span class="icon icon-link"></span></a>Conditional breakpoints</h2>
<p>Personally, I set up a keymap in my neovim so I don't have to type so much. Here's the lua code for the keymap</p>
<pre class="shiki catppuccin-frappe" style="background-color:#303446;color:#c6d0f5" tabindex="0"><code><span class="line"><span style="color:#CA9EE6">local</span><span style="color:#8CAAEE;font-style:italic"> yank_for_conditional_break</span><span style="color:#81C8BE"> =</span><span style="color:#CA9EE6"> function</span><span style="color:#949CBB"> ()</span></span>
<span class="line"><span style="color:#CA9EE6">    local</span><span style="color:#C6D0F5"> path </span><span style="color:#81C8BE">=</span><span style="color:#C6D0F5"> vim.fn.</span><span style="color:#8CAAEE;font-style:italic">expand</span><span style="color:#C6D0F5">(</span><span style="color:#A6D189">'%:.'</span><span style="color:#C6D0F5">)</span></span>
<span class="line"><span style="color:#CA9EE6">    local</span><span style="color:#C6D0F5"> line </span><span style="color:#81C8BE">=</span><span style="color:#C6D0F5"> vim.fn.</span><span style="color:#8CAAEE;font-style:italic">line</span><span style="color:#C6D0F5">(</span><span style="color:#A6D189">'.'</span><span style="color:#C6D0F5">)</span></span>
<span class="line"><span style="color:#CA9EE6">    local</span><span style="color:#C6D0F5"> word </span><span style="color:#81C8BE">=</span><span style="color:#C6D0F5"> vim.fn.</span><span style="color:#8CAAEE;font-style:italic">expand</span><span style="color:#C6D0F5">(</span><span style="color:#A6D189">"&#x3C;cword>"</span><span style="color:#C6D0F5">)</span></span>
<span class="line"><span style="color:#CA9EE6">    local</span><span style="color:#C6D0F5"> result </span><span style="color:#81C8BE">=</span><span style="color:#A6D189"> 'breakpoint set --file '</span><span style="color:#81C8BE">..</span><span style="color:#C6D0F5"> path </span><span style="color:#81C8BE">..</span><span style="color:#A6D189"> ' --line ' </span><span style="color:#81C8BE">..</span><span style="color:#C6D0F5"> line </span><span style="color:#81C8BE">..</span><span style="color:#A6D189"> ' --condition ' </span><span style="color:#81C8BE">..</span><span style="color:#A6D189"> '</span><span style="color:#F4B8E4">\'</span><span style="color:#A6D189">' </span><span style="color:#81C8BE">..</span><span style="color:#C6D0F5"> word</span></span>
<span class="line"><span style="color:#C6D0F5">    vim.fn.</span><span style="color:#8CAAEE;font-style:italic">setreg</span><span style="color:#C6D0F5">(</span><span style="color:#A6D189">'+'</span><span style="color:#C6D0F5">, result)</span></span>
<span class="line"><span style="color:#CA9EE6">end</span></span></code></pre>
<h2 id="watchpoint"><a aria-hidden="true" tabindex="-1" href="#watchpoint"><span class="icon icon-link"></span></a>Watchpoint</h2>
<p>TODO: Explain watchpoint</p>
<h1 id="gitbisect"><a aria-hidden="true" tabindex="-1" href="#gitbisect"><span class="icon icon-link"></span></a>gitbisect</h1>
<p>should spawn its own shell so git bisect run is not affected</p>
<h1 id="llvm-reduce"><a aria-hidden="true" tabindex="-1" href="#llvm-reduce"><span class="icon icon-link"></span></a>llvm-reduce</h1>
<p>Something about being interesting to be able to reduce.</p>
<h1 id="rsp_bisectpy"><a aria-hidden="true" tabindex="-1" href="#rsp_bisectpy"><span class="icon icon-link"></span></a>rsp_bisect.py</h1>
<p>rsp file is response file? not sure how relevant this will be or if newcomers will ever use it</p>
<h1 id="tdiffpy"><a aria-hidden="true" tabindex="-1" href="#tdiffpy"><span class="icon icon-link"></span></a>tdiff.py</h1>
<h1 id="llvm-extract"><a aria-hidden="true" tabindex="-1" href="#llvm-extract"><span class="icon icon-link"></span></a>llvm-extract</h1>
<h1 id="reading-skills-experience-or-think-harder"><a aria-hidden="true" tabindex="-1" href="#reading-skills-experience-or-think-harder"><span class="icon icon-link"></span></a>Reading skills, experience, (or think harder)</h1>
<p>Yep yep, you read it right</p>
<p>debugging also comes from lang ref:
for example, if you're creating a new instruction from another instruction, for example: llvm.reduce.and i32 to i1</p></div></article></div><!--$--><!--/$--></div><button class="bottom-4 right-4 fixed"><div class="inline text-2xl font-bold border-black border-2 rounded  p-0 m-0 h-100 w-100">⇡⇡</div></button><footer class="footer self-center justify-center gap-2 pt-4 items-center italic "><p>Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)</p></footer><script src="/_next/static/chunks/webpack-47bbed6067fe1d45.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[6874,[\"874\",\"static/chunks/874-437a265a67d6cfee.js\",\"880\",\"static/chunks/app/posts/%5Bid%5D/page-f0f7551128d4c13f.js\"],\"\"]\n3:I[7555,[],\"\"]\n4:I[1295,[],\"\"]\n5:I[7921,[\"874\",\"static/chunks/874-437a265a67d6cfee.js\",\"63\",\"static/chunks/63-63ed21df6f1fc3e7.js\",\"177\",\"static/chunks/app/layout-05e345a4cd50b3e1.js\"],\"default\"]\n7:I[9665,[],\"OutletBoundary\"]\n9:I[4911,[],\"AsyncMetadataOutlet\"]\nb:I[9665,[],\"ViewportBoundary\"]\nd:I[9665,[],\"MetadataBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[8393,[],\"\"]\n:HL[\"/_next/static/media/7385e8d9d3c5518f-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n:HL[\"/_next/static/css/3b37cf79ceb9ce8f.css\",\"style\"]\n:HL[\"/_next/static/css/3864b451a61e4546.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"cvACEl2ObyH2VbIgNhA7-\",\"p\":\"\",\"c\":[\"\",\"posts\",\"hitchhiker_guide_to_llvm_debugging\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"hitchhiker_guide_to_llvm_debugging\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3b37cf79ceb9ce8f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"px-4 py-4\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_d4e0c8 flex flex-col min-h-screen\",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex justify-center items-center py-4 \",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold\",\"children\":\"Jasmine Tang\"}]}]}],[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L5\",null,{}],[\"$\",\"footer\",null,{\"className\":\"footer self-center justify-center gap-2 pt-4 items-center italic \",\"children\":[\"$\",\"p\",null,{\"children\":\"Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)\"}]}]]}]}]]}],{\"children\":[\"posts\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"hitchhiker_guide_to_llvm_debugging\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3864b451a61e4546.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L7\",null,{\"children\":[\"$L8\",[\"$\",\"$L9\",null,{\"promise\":\"$@a\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$e\",null,{\"fallback\":null,\"children\":\"$Lf\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"12:I[8175,[],\"IconMark\"]\n11:T2ba4,"])</script><script>self.__next_f.push([1,"\u003cnav class=\"toc\"\u003e\u003col class=\"toc-level toc-level-1\"\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#prologue\"\u003ePrologue\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#introduction\"\u003eIntroduction\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#grepping\"\u003eGrepping\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#git-blame-and-pull-requests\"\u003eGit blame and pull requests\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#godbolt--debug-only--print-after-all--print-changed-and-all-that\"\u003egodbolt, -debug-only, -print-after-all, -print-changed and all that\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#lldb-and-debuggers\"\u003elldb and debuggers\u003c/a\u003e\u003col class=\"toc-level toc-level-2\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#dump\"\u003edump.*\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#llvmutilslldbdataformatterspy\"\u003ellvm/utils/lldbDataFormatters.py\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#conditional-breakpoints\"\u003eConditional breakpoints\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#watchpoint\"\u003eWatchpoint\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#gitbisect\"\u003egitbisect\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#llvm-reduce\"\u003ellvm-reduce\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#rsp_bisectpy\"\u003ersp_bisect.py\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#tdiffpy\"\u003etdiff.py\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#llvm-extract\"\u003ellvm-extract\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#reading-skills-experience-or-think-harder\"\u003eReading skills, experience, (or think harder)\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/nav\u003e\u003ch1 id=\"prologue\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#prologue\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ePrologue\u003c/h1\u003e\n\u003cp\u003e[TODO]: Jasmine you need to make your blog more personable, apparently there's a dude out plaglarising people's blog, despicable\n\u003ca href=\"https://www.linkedin.com/posts/alexander-logunov_deeplearning-microlearning-criticalthinking-activity-7353354281934020608-rE2J?utm_source=share\u0026#x26;utm_medium=member_desktop\u0026#x26;rcm=ACoAAC6QhfkBsgNZDMpt_hworID-CPWTYLaq4kg\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://www.linkedin.com/posts/alexander-logunov_deeplearning-microlearning-criticalthinking-activity-7353354281934020608-rE2J?utm_source=share\u0026#x26;utm_medium=member_desktop\u0026#x26;rcm=ACoAAC6QhfkBsgNZDMpt_hworID-CPWTYLaq4kg\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eHello everyone, how's everybody doing? I'm still chugging away at solving LLVM issues at Igalia :) Fall and winter's\ncoming soon, and by the time this blog's up, I will be turning a year older. Welp, another year a few\nmore blogs am i right hahahahhaa.\u003c/p\u003e\n\u003cp\u003eThis blog will be detailing my debugging methods since working on LLVM. For the foreseeable future (while the blog\ntitle has [ONGOING]), this blog will be continually updated with new knowledge of mine, given that I'm still new in llvm\u003c/p\u003e\n\u003ch1 id=\"introduction\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#introduction\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eIntroduction\u003c/h1\u003e\n\u003ch1 id=\"grepping\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#grepping\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eGrepping\u003c/h1\u003e\n\u003cp\u003eSomething something grepping is very helpful\u003c/p\u003e\n\u003ch1 id=\"git-blame-and-pull-requests\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#git-blame-and-pull-requests\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eGit blame and pull requests\u003c/h1\u003e\n\u003cp\u003eFor a beginner in a codebase (even a seasoned programmer),\nthe ability to obtain more information and context,\nextending further than the code sitting in front of them, is extremely helpful.\u003c/p\u003e\n\u003cp\u003eWith git blame: \u003ca href=\"https://git-scm.com/docs/git-blame\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://git-scm.com/docs/git-blame\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eIt's also helpful to look up on the internet for the commit's pull requests, either through github or through reviews.llvm.org\u003c/p\u003e\n\u003cp\u003efor example \u003ca href=\"https://reviews.llvm.org/D124685?id=431828#inline-1213666\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://reviews.llvm.org/D124685?id=431828#inline-1213666\u003c/a\u003e has a TODO, but without reading the PRs, the TODO would seem very unclear and hazy.\u003c/p\u003e\n\u003cp\u003eIn other words, reading code is the first step, after that, commit messages provides greater additional context on the problems being solved and finally, the pull request\nand the reviews.llvm provides opinions and directives.\u003c/p\u003e\n\u003ch1 id=\"godbolt--debug-only--print-after-all--print-changed-and-all-that\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#godbolt--debug-only--print-after-all--print-changed-and-all-that\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003egodbolt, -debug-only, -print-after-all, -print-changed and all that\u003c/h1\u003e\n\u003cp\u003eIf you haven't heard of godbolt, think of it as a way for compiler developer to say no to \"but but but it works on my machineeee :('\u003c/p\u003e\n\u003ch1 id=\"lldb-and-debuggers\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#lldb-and-debuggers\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003elldb and debuggers\u003c/h1\u003e\n\u003cp\u003eIf\u003c/p\u003e\n\u003cp\u003eIf you've ever heard of gdb (the GNU debugger) from gcc (the GNU compiler collection)\nGive motivational thinking about\u003c/p\u003e\n\u003cp\u003elldb has auto repeat on when you press sth then you press return\u003c/p\u003e\n\u003ch2 id=\"dump\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#dump\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003edump.*\u003c/h2\u003e\n\u003cp\u003eThe \u003ccode\u003edump()\u003c/code\u003e helper function in llvm is basically a pretty printer for\u003c/p\u003e\n\u003cp\u003eA lot of the time, when you perform\nripgrep \u003ccode\u003evoid dump.*\\(\\) \u003c/code\u003e\nLoop class has dumpVerbose\u003c/p\u003e\n\u003cp\u003eRegAlloc class has dumpState\u003c/p\u003e\n\u003ch2 id=\"llvmutilslldbdataformatterspy\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#llvmutilslldbdataformatterspy\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ellvm/utils/lldbDataFormatters.py\u003c/h2\u003e\n\u003cp\u003elldbDataFormatters.py (LDF) is a python script to integrate with LLDB. In LLDB, when you print a specific LLVM data structure\nthat doesn't have the \u003ccode\u003edump()\u003c/code\u003e helper function, things can get a bit messy due to how the debugger's treating the data structure as\na pointer only.\u003c/p\u003e\n\u003cp\u003eWith LDF, you can\u003c/p\u003e\n\u003cp\u003eLoad into LLDB with 'command script import llvm/utils/lldbDataFormatters.py'\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\n(lldb) command script import llvm/utils/lldbDataFormatters.py\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eGives out pretty printer for DenseMap, DenseSet, StringRef, SmallVector, SmallStrings\u003c/p\u003e\n\u003cp\u003eHere's an picture showing the before and after\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/blogs/hitchhiker_guide_to_llvm_debugging/showcase_lldbDataFormatters.png\" alt=\"showcase_lldbformatters\"\u003e\u003c/p\u003e\n\u003ch2 id=\"conditional-breakpoints\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#conditional-breakpoints\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eConditional breakpoints\u003c/h2\u003e\n\u003cp\u003ePersonally, I set up a keymap in my neovim so I don't have to type so much. Here's the lua code for the keymap\u003c/p\u003e\n\u003cpre class=\"shiki catppuccin-frappe\" style=\"background-color:#303446;color:#c6d0f5\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003elocal\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003e yank_for_conditional_break\u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#CA9EE6\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#949CBB\"\u003e ()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003e    local\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e path \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e vim.fn.\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003eexpand\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e'%:.'\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003e    local\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e line \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e vim.fn.\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003eline\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e'.'\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003e    local\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e word \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e vim.fn.\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003eexpand\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e\"\u0026#x3C;cword\u003e\"\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003e    local\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e result \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e 'breakpoint set --file '\u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e path \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e ' --line ' \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e line \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e ' --condition ' \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F4B8E4\"\u003e\\'\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e' \u003c/span\u003e\u003cspan style=\"color:#81C8BE\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e word\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#C6D0F5\"\u003e    vim.fn.\u003c/span\u003e\u003cspan style=\"color:#8CAAEE;font-style:italic\"\u003esetreg\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#A6D189\"\u003e'+'\u003c/span\u003e\u003cspan style=\"color:#C6D0F5\"\u003e, result)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#CA9EE6\"\u003eend\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"watchpoint\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#watchpoint\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eWatchpoint\u003c/h2\u003e\n\u003cp\u003eTODO: Explain watchpoint\u003c/p\u003e\n\u003ch1 id=\"gitbisect\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#gitbisect\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003egitbisect\u003c/h1\u003e\n\u003cp\u003eshould spawn its own shell so git bisect run is not affected\u003c/p\u003e\n\u003ch1 id=\"llvm-reduce\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#llvm-reduce\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ellvm-reduce\u003c/h1\u003e\n\u003cp\u003eSomething about being interesting to be able to reduce.\u003c/p\u003e\n\u003ch1 id=\"rsp_bisectpy\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#rsp_bisectpy\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ersp_bisect.py\u003c/h1\u003e\n\u003cp\u003ersp file is response file? not sure how relevant this will be or if newcomers will ever use it\u003c/p\u003e\n\u003ch1 id=\"tdiffpy\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#tdiffpy\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003etdiff.py\u003c/h1\u003e\n\u003ch1 id=\"llvm-extract\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#llvm-extract\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ellvm-extract\u003c/h1\u003e\n\u003ch1 id=\"reading-skills-experience-or-think-harder\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#reading-skills-experience-or-think-harder\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eReading skills, experience, (or think harder)\u003c/h1\u003e\n\u003cp\u003eYep yep, you read it right\u003c/p\u003e\n\u003cp\u003edebugging also comes from lang ref:\nfor example, if you're creating a new instruction from another instruction, for example: llvm.reduce.and i32 to i1\u003c/p\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"py-12 flex flex-col items-center  justify-items-start mx-auto \",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/blog\",\"className\":\"flex justify-center text-4xl\",\"children\":[\"$\",\"h2\",null,{\"children\":\"My blog\"}]}],[\"$\",\"article\",null,{\"className\":\"p-8 prose pt-0.5 max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex justify-center text-2xl font-bold \",\"children\":[\"$\",\"h2\",null,{\"children\":\"[ONGOING] Jasmine and the hitchhiker's guide to LLVM's debugging tools\"}]}],[\"$\",\"div\",null,{\"className\":\"flex justify-start text-xl font-bold underline\",\"children\":[\"$\",\"h4\",null,{\"children\":\"8888-08-08\"}]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$11\"}}]]}]]}]\n"])</script><script>self.__next_f.push([1,"a:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"[ONGOING] Jasmine and the hitchhiker's guide to LLVM's debugging tools\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Jasmine introduces to readers debugging techniques that would benefit their LLVM development.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/_next/static/media/pfp5.0daa0f7d.jpeg\"}],[\"$\",\"$L12\",\"3\",{}]],\"error\":null,\"digest\":\"$undefined\"}\nf:\"$a:metadata\"\n"])</script></body></html>