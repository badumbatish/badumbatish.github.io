1:"$Sreact.fragment"
2:I[6874,["874","static/chunks/874-437a265a67d6cfee.js","880","static/chunks/app/posts/%5Bid%5D/page-8778b7e42f8ceed2.js"],""]
3:I[7555,[],""]
4:I[1295,[],""]
5:I[7921,["874","static/chunks/874-437a265a67d6cfee.js","63","static/chunks/63-63ed21df6f1fc3e7.js","177","static/chunks/app/layout-05e345a4cd50b3e1.js"],"default"]
7:I[9665,[],"OutletBoundary"]
9:I[4911,[],"AsyncMetadataOutlet"]
b:I[9665,[],"ViewportBoundary"]
d:I[9665,[],"MetadataBoundary"]
e:"$Sreact.suspense"
10:I[8393,[],""]
:HL["/_next/static/media/7385e8d9d3c5518f-s.p.ttf","font",{"crossOrigin":"","type":"font/ttf"}]
:HL["/_next/static/css/3b37cf79ceb9ce8f.css","style"]
:HL["/_next/static/css/8a287c41de7a8698.css","style"]
0:{"P":null,"b":"pY3q8OgVcWB3ZdIbugG_w","p":"","c":["","posts","gsoc_prop"],"i":false,"f":[[["",{"children":["posts",{"children":[["id","gsoc_prop","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/3b37cf79ceb9ce8f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","className":"px-4 py-4","children":["$","body",null,{"className":"__className_d4e0c8 flex flex-col min-h-screen","children":[["$","$L2",null,{"href":"/","children":["$","div",null,{"className":"flex justify-center items-center py-4 ","children":["$","h1",null,{"className":"text-4xl font-bold","children":"Jasmine Tang"}]}]}],["$","div",null,{"className":"flex-1","children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","$L5",null,{}],["$","footer",null,{"className":"footer self-center justify-center gap-2 pt-4 items-center italic ","children":["$","p",null,{"children":"Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)"}]}]]}]}]]}],{"children":["posts",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["id","gsoc_prop","d"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L6",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/8a287c41de7a8698.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L7",null,{"children":["$L8",["$","$L9",null,{"promise":"$@a"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,[["$","$Lb",null,{"children":"$Lc"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$Ld",null,{"children":["$","div",null,{"hidden":true,"children":["$","$e",null,{"fallback":null,"children":"$Lf"}]}]}]]}],false]],"m":"$undefined","G":["$10",[]],"s":false,"S":true}
c:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:null
12:I[8175,[],"IconMark"]
11:T18be3,<nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#prologue">Prologue</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#jjasmines-gsoc-gccrs-proposal">jjasmineâ€™s Gsoc GCCRS proposal</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#gsoc-proposal-inline-assembly-support">Gsoc Proposal: Inline assembly Support</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#project">Project</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#goals">Goals</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#expected-timeline--responsibitilies">Expected timeline &#x26; responsibitilies</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#expected-timeline">Expected timeline</a><ol class="toc-level toc-level-3"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#week-1-3-may-27---june-17-implement-and-test-the-parser-to-convert-rust-asm-format-to-gcc-asm-format">WEEK 1-3 (May 27 - June 17): Implement and test the parser to convert rust asm format to gcc asm format.</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#week-4-june-17---june-24-improve-if-possible-asm-ast-in-rust-macro-builtins-implement-asm-hir-and-visitor">WEEK 4 (June 17 - June 24): Improve (if possible) asm-AST in rust-macro-builtins, implement asm-HIR and visitor</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#week-5-june-24---july-1-implement-handlers-for-asm-creating-ast-asm-from-a-stream-of-tokens">WEEK 5 (June 24 - July 1): Implement handlers for asm, creating AST asm from a stream of tokens.</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#week-6-7-july-1---july-15-work-with-astlowering-lowering-the-asm-ast-to-hir-high-level-ir">WEEK 6-7 (July 1 - July 15): Work with ASTLowering, lowering the asm-AST to HIR (high level IR).</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#week-7-8-july-15---july-29-work-with-generic-il-in-compile-converting-hir-to-generic-intermediate-language">WEEK 7-8 (July 15 - July 29): Work with GENERIC IL in Compile*, converting HIR to GENERIC intermediate language.</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#week-9-july-29---aug-5-end-to-end-testing">WEEK 9 (July 29 - Aug 5): End-to-end testing.</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#week-11-12-aug-5---19-spare-time-allocation-for-different-parts-of-projects">WEEK 11-12 (Aug 5 - 19): Spare time allocation for different parts of projects.</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#week-10-aug-19---aug-26-report-and-documentation">WEEK 10 (Aug 19 - Aug 26): Report and Documentation</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#responsibitiles-and-my-schedule">Responsibitiles and my schedule.</a><ol class="toc-level toc-level-3"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#university">University</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#internship">Internship</a></li></ol></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#design-doc">Design doc</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#lexer--parser-implementation">Lexer &#x26; Parser implementation</a><ol class="toc-level toc-level-3"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#grammar">Grammar</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#implementation">Implementation</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#rust-asm-ast-hir-and-visitor">rust asm-ast, HIR, and visitor</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#asm-handlers">asm-handlers</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#astlowering">ASTLowering</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#converting-hir-to-generic-intermediate-language">Converting HIR to GENERIC intermediate language</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#introduce-myself-my-skills-and-accomplishments">Introduce myself, my skills and accomplishments</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#information">Information</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#about-myself">About myself</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#my-contribution-to-gccrs">My contribution to gccrs</a></li></ol></li></ol></nav><h1 id="prologue"><a aria-hidden="true" tabindex="-1" href="#prologue"><span class="icon icon-link"></span></a>Prologue</h1>
<p>Hi everyone, I hope you're doing great. This is an archive of my GSoc 2024 proposal: Inline Assembly in gccrs.</p>
<p>Also here's a <a href="https://www.youtube.com/watch?v=hSYfVjRMeis&#x26;ab_channel=darkcat-Topic" rel="nofollow" target="_blank">song</a> for you :)</p>
<p>I hope
you enjoy!</p>
<h1 id="jjasmines-gsoc-gccrs-proposal"><a aria-hidden="true" tabindex="-1" href="#jjasmines-gsoc-gccrs-proposal"><span class="icon icon-link"></span></a>jjasmineâ€™s Gsoc GCCRS proposal</h1>
<h1 id="gsoc-proposal-inline-assembly-support"><a aria-hidden="true" tabindex="-1" href="#gsoc-proposal-inline-assembly-support"><span class="icon icon-link"></span></a>Gsoc Proposal: Inline assembly Support</h1>
<h1 id="project"><a aria-hidden="true" tabindex="-1" href="#project"><span class="icon icon-link"></span></a>Project</h1>
<p>From the gccrs github, "gccrs is a full alternative implementation of the Rust language ontop of GCC with the goal to become fully upstream with the GNU toolchain."</p>
<p>One of the steps to reach its implementation counterpart's parity (rustc) is the support of inline assembly. Enabling this feature allows programmers to work on low level situation where some extra performance is always needed.</p>
<p>An example is where you would want to handle the case of moving 16-bit data when the data is not exactly 64-bit.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="rust" data-theme="github-dark-dimmed"><code data-language="rust" data-theme="github-dark-dimmed" style="display: grid;"><span data-line=""><span style="color:#768390">// https://github.com/rust-lang/rust/blob/</span></span>
<span data-line=""><span style="color:#768390">// b3df0d7e5ef5f7dbeeca3fb289c65680ad013f87/library/std/src/sys/pal/sgx/abi/</span></span>
<span data-line=""><span style="color:#768390">// usercalls/alloc.rs#L330</span></span>
<span data-line=""><span style="color:#F47067">unsafe</span><span style="color:#F47067"> fn</span><span style="color:#DCBDFB"> copy_quadwords</span><span style="color:#6cb6ff">(</span><span style="color:#ADBAC7">src</span><span style="color:#F47067">:</span><span style="color:#F47067"> *const</span><span style="color:#F69D50"> u8</span><span style="color:#ADBAC7">, dst</span><span style="color:#F47067">:</span><span style="color:#F47067"> *mut</span><span style="color:#F69D50"> u8</span><span style="color:#ADBAC7">, len</span><span style="color:#F47067">:</span><span style="color:#F69D50"> usize</span><span style="color:#6cb6ff">)</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">{</span></span>
<span data-line=""><span style="color:#F47067">    unsafe</span><span style="color:#ADBAC7"> </span><span style="color:#6bc46d">{</span></span>
<span data-line=""><span style="color:#DCBDFB">        asm!</span><span style="color:#daaa3f">(</span></span>
<span data-line=""><span style="color:#96D0FF">            "rep movsq (%rsi), (%rdi)"</span><span style="color:#ADBAC7">,</span></span>
<span data-line=""><span style="color:#DCBDFB">            inout</span><span style="color:#ff938a">(</span><span style="color:#96D0FF">"rcx"</span><span style="color:#ff938a">)</span><span style="color:#ADBAC7"> len </span><span style="color:#F47067">/</span><span style="color:#6CB6FF"> 8</span><span style="color:#F47067"> =</span><span style="color:#F47067">></span><span style="color:#ADBAC7"> _,</span></span>
<span data-line=""><span style="color:#DCBDFB">            inout</span><span style="color:#ff938a">(</span><span style="color:#96D0FF">"rdi"</span><span style="color:#ff938a">)</span><span style="color:#ADBAC7"> dst </span><span style="color:#F47067">=</span><span style="color:#F47067">></span><span style="color:#ADBAC7"> _,</span></span>
<span data-line=""><span style="color:#DCBDFB">            inout</span><span style="color:#ff938a">(</span><span style="color:#96D0FF">"rsi"</span><span style="color:#ff938a">)</span><span style="color:#ADBAC7"> src </span><span style="color:#F47067">=</span><span style="color:#F47067">></span><span style="color:#ADBAC7"> _,</span></span>
<span data-line=""><span style="color:#DCBDFB">            options</span><span style="color:#ff938a">(</span><span style="color:#ADBAC7">att_syntax, nostack, preserves_flags</span><span style="color:#ff938a">)</span></span>
<span data-line=""><span style="color:#ADBAC7">        </span><span style="color:#daaa3f">)</span><span style="color:#ADBAC7">;</span></span>
<span data-line=""><span style="color:#ADBAC7">    </span><span style="color:#6bc46d">}</span></span>
<span data-line=""><span style="color:#6cb6ff">}</span></span><button type="button" title="Copy code" aria-label="Copy code" data="// https://github.com/rust-lang/rust/blob/
// b3df0d7e5ef5f7dbeeca3fb289c65680ad013f87/library/std/src/sys/pal/sgx/abi/
// usercalls/alloc.rs#L330
unsafe fn copy_quadwords(src: *const u8, dst: *mut u8, len: usize) {
    unsafe {
        asm!(
            &#x22;rep movsq (%rsi), (%rdi)&#x22;,
            inout(&#x22;rcx&#x22;) len / 8 => _,
            inout(&#x22;rdi&#x22;) dst => _,
            inout(&#x22;rsi&#x22;) src => _,
            options(att_syntax, nostack, preserves_flags)
        );
    }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>The project focuses on adding implementation for two built-in Rust macros: <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>asm!()</span></span><button type="button" title="Copy code" aria-label="Copy code" data="asm!()" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span>, and <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>global_asm!()</span></span><button type="button" title="Copy code" aria-label="Copy code" data="global_asm!()" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span>.</p>
<p>The gcc compiler will be able to detect parse the assembly code within asm!, and global_asm! macro, converting them to gcc assembly format to eventually generate code.</p>
<h1 id="goals"><a aria-hidden="true" tabindex="-1" href="#goals"><span class="icon icon-link"></span></a>Goals</h1>
<p>This work will require modifications to multiple parts of our compiler, with the creation of built-in macro expanders, AST nodes, HIR nodes, as well as the development of a Rust inline-assembly parser to then convert it to the GCC inline assembly format:</p>
<ul>
<li>Develop a Rust inline assembly parser.</li>
<li>Improve AST inline assembly node.</li>
<li>Construct HIR inline assembly node.</li>
<li>Construct HIR node visitor for the Lowering process.</li>
<li>Implement the HIR -> Generic IL process for inline assembly HIR nodes.</li>
<li>End to test testing of the new gccrs compiler for parity with rustc</li>
</ul>
<h1 id="expected-timeline--responsibitilies"><a aria-hidden="true" tabindex="-1" href="#expected-timeline--responsibitilies"><span class="icon icon-link"></span></a>Expected timeline &#x26; responsibitilies</h1>
<p>The project (coding aspect) is classified as 175 hours (medium) spanning from May 27 to August 26 (3 months or 12 weeks). This equates to 175/12 = 14.58 hours per week, or 2 hours per day.</p>
<p>The first subsection serves as a mini design doc where I explain my timeline and expand to my implementation goals.</p>
<p>The second subsection goes over my schedule and other responsibilities I have over summer and how I plan to counteract that.</p>
<h2 id="expected-timeline"><a aria-hidden="true" tabindex="-1" href="#expected-timeline"><span class="icon icon-link"></span></a>Expected timeline</h2>
<h3 id="week-1-3-may-27---june-17-implement-and-test-the-parser-to-convert-rust-asm-format-to-gcc-asm-format"><a aria-hidden="true" tabindex="-1" href="#week-1-3-may-27---june-17-implement-and-test-the-parser-to-convert-rust-asm-format-to-gcc-asm-format"><span class="icon icon-link"></span></a>WEEK 1-3 (May 27 - June 17): Implement and test the parser to convert rust asm format to gcc asm format.</h3>
<p>Since Rust follows a different convention in calling its assembly than C/C++, I need to parse and capture the information so that in later stages, I can use the information as arguments into one of gccâ€™s available function call regarding inline assembly.
The parser will be a recursive-descent parser, adhering to the ABNF syntax described at <a href="https://doc.rust-lang.org/reference/inline-assembly.html" rel="nofollow" target="_blank">https://doc.rust-lang.org/reference/inline-assembly.html</a></p>
<p>The programmer (me in this case) will need to learn about gccrsâ€™ token stream API, error emitting api (rust_error?), in order to input tokens and process them.</p>
<p>The tests would consist of different scenarios of token streams from valid rust files and the parser should be able to capture all the necessary information from the token streams. For testing, the programmer should consult <a href="https://www.gnu.org/software/dejagnu/manual/index.html" rel="nofollow" target="_blank">https://www.gnu.org/software/dejagnu/manual/index.html</a> and look at relevant test suites</p>
<p>One inspiration for this part would be <a href="https://github.com/rust-lang/rust/blob/master/compiler/rustc_codegen_gcc/src/asm.rs" rel="nofollow" target="_blank">rustc_codegen_gcc/asm.rs</a> to see how the project translates rust inline assembly to gcc inline assembly IR (IR here represents the result after the parser has finished parsing it and the semantics have been transformed (per the <a href="https://github.com/rust-lang/rust/blob/master/compiler/rustc_codegen_gcc/src/asm.rs" rel="nofollow" target="_blank">asm.rs</a> file's comment) and later can be used solely to generate code).</p>
<p>Another one is since rust asm uses formatting with arg, it will be helpful to consider  <a href="https://github.com/rust-lang/rust/blob/master/compiler/rustc_parse_format/src/lib.rs" rel="nofollow" target="_blank">https://github.com/rust-lang/rust/blob/master/compiler/rustc_parse_format/src/lib.rs</a> and see how they work with the formatting logic.</p>
<h3 id="week-4-june-17---june-24-improve-if-possible-asm-ast-in-rust-macro-builtins-implement-asm-hir-and-visitor"><a aria-hidden="true" tabindex="-1" href="#week-4-june-17---june-24-improve-if-possible-asm-ast-in-rust-macro-builtins-implement-asm-hir-and-visitor"><span class="icon icon-link"></span></a>WEEK 4 (June 17 - June 24): Improve (if possible) asm-AST in rust-macro-builtins, implement asm-HIR and visitor</h3>
<p>From <a href="https://github.com/Rust-GCC/gccrs/issues/1566" rel="nofollow" target="_blank">Rust-GCC/gccrs#1566</a>, asm-AST has already been implemented, I am to implement asm-HIR and its visitor instead.</p>
<p>The AST (Abstract syntax tree) is the result of the Rust Inline Assembly Parser. This AST will be transformed to a HIR (High Level Intermediate Representation) through a process called <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>Lowering.</span></span><button type="button" title="Copy code" aria-label="Copy code" data="Lowering." class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> This IR helps us perform multiple syntax desugaring, as well as type-checking or borrow checking through the uses of its visitors.</p>
<p>This subpart is done after parsing so that we know what our asm-HIR needs from the parser.</p>
<p>Testing-wise, Iâ€™m not sure there is any testing to be done for this part.</p>
<h3 id="week-5-june-24---july-1-implement-handlers-for-asm-creating-ast-asm-from-a-stream-of-tokens"><a aria-hidden="true" tabindex="-1" href="#week-5-june-24---july-1-implement-handlers-for-asm-creating-ast-asm-from-a-stream-of-tokens"><span class="icon icon-link"></span></a>WEEK 5 (June 24 - July 1): Implement handlers for asm, creating AST asm from a stream of tokens.</h3>
<p>From the available parser, I can use it in conjunction with asm-nodes and asm-AST in rust-macro-builtsin, outputing the asm-AST that I have declared and defined.</p>
<p>No testing on this part.</p>
<h3 id="week-6-7-july-1---july-15-work-with-astlowering-lowering-the-asm-ast-to-hir-high-level-ir"><a aria-hidden="true" tabindex="-1" href="#week-6-7-july-1---july-15-work-with-astlowering-lowering-the-asm-ast-to-hir-high-level-ir"><span class="icon icon-link"></span></a>WEEK 6-7 (July 1 - July 15): Work with ASTLowering, lowering the asm-AST to HIR (high level IR).</h3>
<p>The main classes to deal with are ASTLowering* in the gcc/rust/hir folder. I would create a new class inheriting from ASTLoweringBase and a constructor from asm-AST to deal with lowering the asm-AST.</p>
<h3 id="week-7-8-july-15---july-29-work-with-generic-il-in-compile-converting-hir-to-generic-intermediate-language"><a aria-hidden="true" tabindex="-1" href="#week-7-8-july-15---july-29-work-with-generic-il-in-compile-converting-hir-to-generic-intermediate-language"><span class="icon icon-link"></span></a>WEEK 7-8 (July 15 - July 29): Work with GENERIC IL in Compile*, converting HIR to GENERIC intermediate language.</h3>
<p>The calls to express and create GENERIC tree will be provided via gcc/tree.def. For this part, some helpful definitions are present in gcc/c/c-typeck.cc</p>
<h3 id="week-9-july-29---aug-5-end-to-end-testing"><a aria-hidden="true" tabindex="-1" href="#week-9-july-29---aug-5-end-to-end-testing"><span class="icon icon-link"></span></a>WEEK 9 (July 29 - Aug 5): End-to-end testing.</h3>
<p>Introduce end-to-end testing and fix all relevant bugs.</p>
<p>The required testing involves testing existing inline assembly invocations taken directly from the Rust standard library, as well as testcases from rustc.</p>
<h3 id="week-11-12-aug-5---19-spare-time-allocation-for-different-parts-of-projects"><a aria-hidden="true" tabindex="-1" href="#week-11-12-aug-5---19-spare-time-allocation-for-different-parts-of-projects"><span class="icon icon-link"></span></a>WEEK 11-12 (Aug 5 - 19): Spare time allocation for different parts of projects.</h3>
<p>2 week of free time will be allocated to different aspect of the project.</p>
<h3 id="week-10-aug-19---aug-26-report-and-documentation"><a aria-hidden="true" tabindex="-1" href="#week-10-aug-19---aug-26-report-and-documentation"><span class="icon icon-link"></span></a>WEEK 10 (Aug 19 - Aug 26): Report and Documentation</h3>
<p>I will finish up my report and documentation before submission of my project.</p>
<h2 id="responsibitiles-and-my-schedule"><a aria-hidden="true" tabindex="-1" href="#responsibitiles-and-my-schedule"><span class="icon icon-link"></span></a>Responsibitiles and my schedule.</h2>
<h3 id="university"><a aria-hidden="true" tabindex="-1" href="#university"><span class="icon icon-link"></span></a>University</h3>
<p>My university spring semester ends on Friday, May 10, 2024 with my final exam on May 9.</p>
<p>My university fall semester usually begins on August 23.</p>
<p>My fall semester coursework will (likely) be:</p>
<ul>
<li>CS 265. Compiler Optimization and Code Generation (3 Units) (Grad)</li>
<li>CS 189: Introduction to Machine Learning (4 Units) (Ugrad)</li>
<li>CS 170: Efficient Algorithms and Intractable Problems (4 Units) (Ugrad)</li>
</ul>
<h3 id="internship"><a aria-hidden="true" tabindex="-1" href="#internship"><span class="icon icon-link"></span></a>Internship</h3>
<p>I have an offer where the starting date will be end of May - early June and the ending date will be on the second week of August.</p>
<p>I will be working on the project over the course of May to August 26.</p>
<p>If I am unable to complete the project's goals, I will make sure to discuss an extension with my mentors at the earliest possible.</p>
<p>Such detailed timeline coupled with comprehensive design document is to ensure my progress is consistent throughout.</p>
<h1 id="design-doc"><a aria-hidden="true" tabindex="-1" href="#design-doc"><span class="icon icon-link"></span></a>Design doc</h1>
<p>The design doc is to help me plan out ahead my implementation and discuss them with my mentor.</p>
<h2 id="lexer--parser-implementation"><a aria-hidden="true" tabindex="-1" href="#lexer--parser-implementation"><span class="icon icon-link"></span></a>Lexer &#x26; Parser implementation</h2>
<h3 id="grammar"><a aria-hidden="true" tabindex="-1" href="#grammar"><span class="icon icon-link"></span></a>Grammar</h3>
<p>The BNF grammar for the inline assembly is</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="plaintext" data-theme="github-dark-dimmed"><code data-language="plaintext" data-theme="github-dark-dimmed" style="display: grid;"><span data-line=""><span>format_string := STRING_LITERAL / RAW_STRING_LITERAL</span></span>
<span data-line=""><span>dir_spec := "in" / "out" / "lateout" / "inout" / "inlateout"</span></span>
<span data-line=""><span>reg_spec := &#x3C;register class> / "\"" &#x3C;explicit register> "\""</span></span>
<span data-line=""><span>operand_expr := expr / "_" / expr "=>" expr / expr "=>" "_"</span></span>
<span data-line=""><span>reg_operand := [ident "="] dir_spec "(" reg_spec ")" operand_expr</span></span>
<span data-line=""><span>clobber_abi := "clobber_abi(" &#x3C;abi> *("," &#x3C;abi>) [","] ")"</span></span>
<span data-line=""><span>option := "pure" / "nomem" / "readonly" / "preserves_flags" /</span></span>
<span data-line=""><span>        "noreturn" / "nostack" / "att_syntax" / "raw"</span></span>
<span data-line=""><span>options := "options(" option *("," option) [","] ")"</span></span>
<span data-line=""><span>operand := reg_operand / clobber_abi / options</span></span>
<span data-line=""><span>asm := "asm!(" format_string *("," format_string)</span></span>
<span data-line=""><span>    *("," operand) [","] ")"</span></span>
<span data-line=""><span>global_asm := "global_asm!(" format_string</span></span>
<span data-line=""><span>    *("," format_string) *("," operand) [","] ")"</span></span>
<span data-line=""> </span>
<span data-line=""><span>end := asm | global_asm</span></span><button type="button" title="Copy code" aria-label="Copy code" data="format_string := STRING_LITERAL / RAW_STRING_LITERAL
dir_spec := &#x22;in&#x22; / &#x22;out&#x22; / &#x22;lateout&#x22; / &#x22;inout&#x22; / &#x22;inlateout&#x22;
reg_spec := <register class> / &#x22;\&#x22;&#x22; <explicit register> &#x22;\&#x22;&#x22;
operand_expr := expr / &#x22;_&#x22; / expr &#x22;=>&#x22; expr / expr &#x22;=>&#x22; &#x22;_&#x22;
reg_operand := [ident &#x22;=&#x22;] dir_spec &#x22;(&#x22; reg_spec &#x22;)&#x22; operand_expr
clobber_abi := &#x22;clobber_abi(&#x22; <abi> *(&#x22;,&#x22; <abi>) [&#x22;,&#x22;] &#x22;)&#x22;
option := &#x22;pure&#x22; / &#x22;nomem&#x22; / &#x22;readonly&#x22; / &#x22;preserves_flags&#x22; /
        &#x22;noreturn&#x22; / &#x22;nostack&#x22; / &#x22;att_syntax&#x22; / &#x22;raw&#x22;
options := &#x22;options(&#x22; option *(&#x22;,&#x22; option) [&#x22;,&#x22;] &#x22;)&#x22;
operand := reg_operand / clobber_abi / options
asm := &#x22;asm!(&#x22; format_string *(&#x22;,&#x22; format_string)
    *(&#x22;,&#x22; operand) [&#x22;,&#x22;] &#x22;)&#x22;
global_asm := &#x22;global_asm!(&#x22; format_string
    *(&#x22;,&#x22; format_string) *(&#x22;,&#x22; operand) [&#x22;,&#x22;] &#x22;)&#x22;

end := asm | global_asm" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>where the end result will be an <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>end</span></span><button type="button" title="Copy code" aria-label="Copy code" data="end" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span>.</p>
<h3 id="implementation"><a aria-hidden="true" tabindex="-1" href="#implementation"><span class="icon icon-link"></span></a>Implementation</h3>
<p>The lexer I'll be using on this part will be the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>MacroInvocLexer</span></span><button type="button" title="Copy code" aria-label="Copy code" data="MacroInvocLexer" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> via <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>MacroInvocLexer lex (invoc.get_delim_tok_tree ().to_token_stream ());</span></span><button type="button" title="Copy code" aria-label="Copy code" data="MacroInvocLexer lex (invoc.get_delim_tok_tree ().to_token_stream ());" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span>. It serves as a parameter for my parser like
<span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>Parser&#x3C;MacroInvocLexer> parser (lex);</span></span><button type="button" title="Copy code" aria-label="Copy code" data="Parser<MacroInvocLexer> parser (lex);" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span></p>
<p>With the parser called <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>p</span></span><button type="button" title="Copy code" aria-label="Copy code" data="p" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span>, I can call the methods in <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>gcc/rust/parse/rust-parse.h</span></span><button type="button" title="Copy code" aria-label="Copy code" data="gcc/rust/parse/rust-parse.h" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> on the parser to perform some recursive descent logic.</p>
<h2 id="rust-asm-ast-hir-and-visitor"><a aria-hidden="true" tabindex="-1" href="#rust-asm-ast-hir-and-visitor"><span class="icon icon-link"></span></a>rust asm-ast, HIR, and visitor</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="cpp" data-theme="github-dark-dimmed"><code data-language="cpp" data-theme="github-dark-dimmed" style="display: grid;"><span data-line=""><span style="color:#768390">// Namespace HIR</span></span>
<span data-line=""><span style="color:#768390">// In rust-hir-exp.h</span></span>
<span data-line=""><span style="color:#ADBAC7">InlineAsm : ExprWithoutBlock </span><span style="color:#6cb6ff">{</span></span>
<span data-line=""><span style="color:#ADBAC7">    ...</span></span>
<span data-line=""><span style="color:#6cb6ff">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#768390">// in rust-hir.cc</span></span>
<span data-line=""><span style="color:#F47067">void</span><span style="color:#F69D50"> InlineAsm</span><span style="color:#ADBAC7">::</span><span style="color:#DCBDFB">accept</span><span style="color:#6cb6ff">(</span><span style="color:#F69D50">HIRExpressionVisitor</span><span style="color:#F47067"> &#x26;</span><span style="color:#F69D50">vis</span><span style="color:#6cb6ff">)</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">{</span></span>
<span data-line=""><span style="color:#ADBAC7">    vis.</span><span style="color:#DCBDFB">visit</span><span style="color:#ADBAC7"> </span><span style="color:#6bc46d">(</span><span style="color:#F47067">*</span><span style="color:#6CB6FF">this</span><span style="color:#6bc46d">)</span><span style="color:#ADBAC7">;</span></span>
<span data-line=""><span style="color:#6cb6ff">}</span></span><button type="button" title="Copy code" aria-label="Copy code" data="// Namespace HIR
// In rust-hir-exp.h
InlineAsm : ExprWithoutBlock {
    ...
}

// in rust-hir.cc
void InlineAsm::accept(HIRExpressionVisitor &#x26;vis) {
    vis.visit (*this);
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>The visitor for HIR::InlineAsm is HIRExpressionVisitor.</p>
<h2 id="asm-handlers"><a aria-hidden="true" tabindex="-1" href="#asm-handlers"><span class="icon icon-link"></span></a>asm-handlers</h2>
<p>I need to add two entries which are the handler functions to the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>gcc/rust/expand/rust-macro-builtins.cc</span></span><button type="button" title="Copy code" aria-label="Copy code" data="gcc/rust/expand/rust-macro-builtins.cc" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span>'s <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>MacroBuiltin::builtin_transcribers</span></span><button type="button" title="Copy code" aria-label="Copy code" data="MacroBuiltin::builtin_transcribers" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> and remove the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>llvm_asm</span></span><button type="button" title="Copy code" aria-label="Copy code" data="llvm_asm" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> key from the map.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="cpp" data-theme="github-dark-dimmed"><code data-language="cpp" data-theme="github-dark-dimmed" style="display: grid;"><span data-line=""><span style="color:#6cb6ff">{</span><span style="color:#96D0FF">"asm"</span><span style="color:#ADBAC7">, </span><span style="color:#F69D50">MacroBuiltin</span><span style="color:#ADBAC7">::asm_handler</span><span style="color:#6cb6ff">}</span><span style="color:#ADBAC7">,</span></span>
<span data-line=""><span style="color:#6cb6ff">{</span><span style="color:#96D0FF">"llvm_asm"</span><span style="color:#ADBAC7">, </span><span style="color:#F69D50">MacroBuiltin</span><span style="color:#ADBAC7">::sorry</span><span style="color:#6cb6ff">}</span><span style="color:#ADBAC7">,</span><span style="color:#768390"> // Remove this.</span></span>
<span data-line=""><span style="color:#6cb6ff">{</span><span style="color:#96D0FF">"global_asm"</span><span style="color:#ADBAC7">, </span><span style="color:#F69D50">MacroBuiltin</span><span style="color:#ADBAC7">::global_asm_handler</span><span style="color:#6cb6ff">}</span><span style="color:#ADBAC7">,</span></span><button type="button" title="Copy code" aria-label="Copy code" data="{&#x22;asm&#x22;, MacroBuiltin::asm_handler},
{&#x22;llvm_asm&#x22;, MacroBuiltin::sorry}, // Remove this.
{&#x22;global_asm&#x22;, MacroBuiltin::global_asm_handler}," class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>I also need to define the two handlers in <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>gcc/rust/expand/rust-macro-builtins.h</span></span><button type="button" title="Copy code" aria-label="Copy code" data="gcc/rust/expand/rust-macro-builtins.h" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span>. They both will</p>
<ul>
<li>Call the parser I implement in the previous part, get the AST::asm from it.</li>
<li>Transform the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>AST::asm</span></span><button type="button" title="Copy code" aria-label="Copy code" data="AST::asm" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> node to an <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>AST::Fragment</span></span><button type="button" title="Copy code" aria-label="Copy code" data="AST::Fragment" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span></li>
<li>Return the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>AST::Fragment</span></span><button type="button" title="Copy code" aria-label="Copy code" data="AST::Fragment" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span>.</li>
</ul>
<p>An <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>AST::Fragment</span></span><button type="button" title="Copy code" aria-label="Copy code" data="AST::Fragment" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> is an AST that can be incorporated back to the AST produced by the general parser. The main reasoning for not returning the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>AST::asm</span></span><button type="button" title="Copy code" aria-label="Copy code" data="AST::asm" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> but instead opting for <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>AST::Fragment</span></span><button type="button" title="Copy code" aria-label="Copy code" data="AST::Fragment" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> is because of the process described by <a href="https://github.com/rust-lang/rustc-dev-guide/blob/master/src/macro-expansion.md" rel="nofollow" target="_blank">https://github.com/rust-lang/rustc-dev-guide/blob/master/src/macro-expansion.md</a></p>
<h2 id="astlowering"><a aria-hidden="true" tabindex="-1" href="#astlowering"><span class="icon icon-link"></span></a>ASTLowering</h2>
<h2 id="converting-hir-to-generic-intermediate-language"><a aria-hidden="true" tabindex="-1" href="#converting-hir-to-generic-intermediate-language"><span class="icon icon-link"></span></a>Converting HIR to GENERIC intermediate language</h2>
<p>Document for GENERIC asm is at <a href="https://gcc.gnu.org/onlinedocs/gccint/Basic-Statements.html" rel="nofollow" target="_blank">GENERIC</a>.</p>
<p>In gcc/c/c-typeck.cc, there is the provided build_asm_expr which I can use to generate GENERIC</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="c" data-theme="github-dark-dimmed"><code data-language="c" data-theme="github-dark-dimmed" style="display: grid;"><span data-line=""><span style="color:#ADBAC7">tree</span></span>
<span data-line=""><span style="color:#DCBDFB">build_asm_expr</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">(</span><span style="color:#6CB6FF">location_t</span><span style="color:#F69D50"> loc</span><span style="color:#ADBAC7">, tree </span><span style="color:#F69D50">string</span><span style="color:#ADBAC7">, tree </span><span style="color:#F69D50">outputs</span><span style="color:#ADBAC7">, tree </span><span style="color:#F69D50">inputs</span><span style="color:#ADBAC7">,</span></span>
<span data-line=""><span style="color:#ADBAC7">		tree </span><span style="color:#F69D50">clobbers</span><span style="color:#ADBAC7">, tree </span><span style="color:#F69D50">labels</span><span style="color:#ADBAC7">, </span><span style="color:#F47067">bool</span><span style="color:#F69D50"> simple</span><span style="color:#ADBAC7">, </span><span style="color:#F47067">bool</span><span style="color:#F69D50"> is_inline</span><span style="color:#6cb6ff">)</span><span style="color:#ADBAC7">;</span></span><button type="button" title="Copy code" aria-label="Copy code" data="tree
build_asm_expr (location_t loc, tree string, tree outputs, tree inputs,
		tree clobbers, tree labels, bool simple, bool is_inline);" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>There are also some macro definitions in <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>gcc/tree.h</span></span><button type="button" title="Copy code" aria-label="Copy code" data="gcc/tree.h" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> that are helpful in manipulating tree expr.</p>
<p>For example, from line 1381 to 1385</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="c" data-theme="github-dark-dimmed"><code data-language="c" data-theme="github-dark-dimmed" style="display: grid;"><span data-line=""><span style="color:#768390">/* ASM_EXPR accessors. ASM_STRING returns a STRING_CST for the</span></span>
<span data-line=""><span style="color:#768390">   instruction (e.g., "mov x, y"). ASM_OUTPUTS, ASM_INPUTS, and</span></span>
<span data-line=""><span style="color:#768390">   ASM_CLOBBERS represent the outputs, inputs, and clobbers for the</span></span>
<span data-line=""><span style="color:#768390">   statement.  */</span></span>
<span data-line=""><span style="color:#F47067">#define</span><span style="color:#DCBDFB"> ASM_STRING</span><span style="color:#6cb6ff">(</span><span style="color:#F69D50">NODE</span><span style="color:#6cb6ff">)</span><span style="color:#ADBAC7">        </span><span style="color:#DCBDFB">TREE_OPERAND</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">(</span><span style="color:#DCBDFB">ASM_EXPR_CHECK</span><span style="color:#ADBAC7"> </span><span style="color:#6bc46d">(</span><span style="color:#ADBAC7">NODE</span><span style="color:#6bc46d">)</span><span style="color:#ADBAC7">, </span><span style="color:#6CB6FF">0</span><span style="color:#6cb6ff">)</span></span>
<span data-line=""><span style="color:#F47067">#define</span><span style="color:#DCBDFB"> ASM_OUTPUTS</span><span style="color:#6cb6ff">(</span><span style="color:#F69D50">NODE</span><span style="color:#6cb6ff">)</span><span style="color:#ADBAC7">       </span><span style="color:#DCBDFB">TREE_OPERAND</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">(</span><span style="color:#DCBDFB">ASM_EXPR_CHECK</span><span style="color:#ADBAC7"> </span><span style="color:#6bc46d">(</span><span style="color:#ADBAC7">NODE</span><span style="color:#6bc46d">)</span><span style="color:#ADBAC7">, </span><span style="color:#6CB6FF">1</span><span style="color:#6cb6ff">)</span></span>
<span data-line=""><span style="color:#F47067">#define</span><span style="color:#DCBDFB"> ASM_INPUTS</span><span style="color:#6cb6ff">(</span><span style="color:#F69D50">NODE</span><span style="color:#6cb6ff">)</span><span style="color:#ADBAC7">        </span><span style="color:#DCBDFB">TREE_OPERAND</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">(</span><span style="color:#DCBDFB">ASM_EXPR_CHECK</span><span style="color:#ADBAC7"> </span><span style="color:#6bc46d">(</span><span style="color:#ADBAC7">NODE</span><span style="color:#6bc46d">)</span><span style="color:#ADBAC7">, </span><span style="color:#6CB6FF">2</span><span style="color:#6cb6ff">)</span></span>
<span data-line=""><span style="color:#F47067">#define</span><span style="color:#DCBDFB"> ASM_CLOBBERS</span><span style="color:#6cb6ff">(</span><span style="color:#F69D50">NODE</span><span style="color:#6cb6ff">)</span><span style="color:#ADBAC7">      </span><span style="color:#DCBDFB">TREE_OPERAND</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">(</span><span style="color:#DCBDFB">ASM_EXPR_CHECK</span><span style="color:#ADBAC7"> </span><span style="color:#6bc46d">(</span><span style="color:#ADBAC7">NODE</span><span style="color:#6bc46d">)</span><span style="color:#ADBAC7">, </span><span style="color:#6CB6FF">3</span><span style="color:#6cb6ff">)</span></span>
<span data-line=""><span style="color:#F47067">#define</span><span style="color:#DCBDFB"> ASM_LABELS</span><span style="color:#6cb6ff">(</span><span style="color:#F69D50">NODE</span><span style="color:#6cb6ff">)</span><span style="color:#ADBAC7">	    </span><span style="color:#DCBDFB">TREE_OPERAND</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">(</span><span style="color:#DCBDFB">ASM_EXPR_CHECK</span><span style="color:#ADBAC7"> </span><span style="color:#6bc46d">(</span><span style="color:#ADBAC7">NODE</span><span style="color:#6bc46d">)</span><span style="color:#ADBAC7">, </span><span style="color:#6CB6FF">4</span><span style="color:#6cb6ff">)</span></span><button type="button" title="Copy code" aria-label="Copy code" data="/* ASM_EXPR accessors. ASM_STRING returns a STRING_CST for the
   instruction (e.g., &#x22;mov x, y&#x22;). ASM_OUTPUTS, ASM_INPUTS, and
   ASM_CLOBBERS represent the outputs, inputs, and clobbers for the
   statement.  */
#define ASM_STRING(NODE)        TREE_OPERAND (ASM_EXPR_CHECK (NODE), 0)
#define ASM_OUTPUTS(NODE)       TREE_OPERAND (ASM_EXPR_CHECK (NODE), 1)
#define ASM_INPUTS(NODE)        TREE_OPERAND (ASM_EXPR_CHECK (NODE), 2)
#define ASM_CLOBBERS(NODE)      TREE_OPERAND (ASM_EXPR_CHECK (NODE), 3)
#define ASM_LABELS(NODE)	    TREE_OPERAND (ASM_EXPR_CHECK (NODE), 4)" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>Another point worth mentioning that since these ASM accessors are nothing but STRING_CST, it would be helpful to be able to determine how to build a STRING_CST. The detailed documentation in <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>gcc/tree.cc</span></span><button type="button" title="Copy code" aria-label="Copy code" data="gcc/tree.cc" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> is:</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="c" data-theme="github-dark-dimmed"><code data-language="c" data-theme="github-dark-dimmed" style="display: grid;"><span data-line=""><span style="color:#768390">/* Return a newly constructed STRING_CST node whose value is the LEN</span></span>
<span data-line=""><span style="color:#768390">   characters at STR when STR is nonnull, or all zeros otherwise.</span></span>
<span data-line=""><span style="color:#768390">   Note that for a C string literal, LEN should include the trailing NUL.</span></span>
<span data-line=""><span style="color:#768390">   The TREE_TYPE is not initialized.  */</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ADBAC7">tree</span></span>
<span data-line=""><span style="color:#DCBDFB">build_string</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">(</span><span style="color:#F47067">unsigned</span><span style="color:#F69D50"> len</span><span style="color:#ADBAC7">, </span><span style="color:#F47067">const</span><span style="color:#F47067"> char</span><span style="color:#F47067"> *</span><span style="color:#ADBAC7">str</span><span style="color:#768390"> /*= NULL */</span><span style="color:#6cb6ff">)</span><span style="color:#ADBAC7"> </span><span style="color:#6cb6ff">{</span><span style="color:#ADBAC7">...</span><span style="color:#6cb6ff">}</span></span><button type="button" title="Copy code" aria-label="Copy code" data="/* Return a newly constructed STRING_CST node whose value is the LEN
   characters at STR when STR is nonnull, or all zeros otherwise.
   Note that for a C string literal, LEN should include the trailing NUL.
   The TREE_TYPE is not initialized.  */

tree
build_string (unsigned len, const char *str /*= NULL */) {...}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<h1 id="introduce-myself-my-skills-and-accomplishments"><a aria-hidden="true" tabindex="-1" href="#introduce-myself-my-skills-and-accomplishments"><span class="icon icon-link"></span></a>Introduce myself, my skills and accomplishments</h1>
<h2 id="information"><a aria-hidden="true" tabindex="-1" href="#information"><span class="icon icon-link"></span></a>Information</h2>
<p>Name: Jasmine Tang</p>
<p>Email (personal): <a href="mailto:tanghocle456@gmail.com">tanghocle456@gmail.com</a></p>
<p>Email (personal): <a href="mailto:thisisjjasmine@gmail.com">thisisjjasmine@gmail.com</a></p>
<p>Email (University): <a href="mailto:jjasmine@berkeley.edu">jjasmine@berkeley.edu</a></p>
<p>GitHub: <a href="https://github.com/badumbatish" rel="nofollow" target="_blank">badumbatish</a></p>
<p>Resume (continually updated): <a href="https://www.overleaf.com/read/bzvddqdhfdqp#fb6509" rel="nofollow" target="_blank">https://www.overleaf.com/read/bzvddqdhfdqp#fb6509</a></p>
<p>University: University of California Berkeley</p>
<h2 id="about-myself"><a aria-hidden="true" tabindex="-1" href="#about-myself"><span class="icon icon-link"></span></a>About myself</h2>
<p>Hi everyone, Iâ€™m Jasmine. Iâ€™m currently a junior undergraduate at UC Berkeley majoring in EECS. This semester, I am taking an undergraduate compiler and will be taking a grad class about code optimization this upcoming Fall.</p>
<p>Iâ€™ve been programming in C, C++, Python, Java, Rust, mainly C/C++ and have done projects in relation to C++ and compilers</p>
<p>Regarding compilers,  one of my projects include building a Scheme (Lisp dialect) Interpreter with recursive descent parsing in Python. As a semester-long class project, I am also building a ChocoPy compiler (a statically-typed subset of Python) with Javaâ€™s lexer and Javaâ€™s LALR(1) parser generator, writing passes for semantic checking and type-checking, as well as generating RISC-V assembly code. I just recently finished the LLVMâ€™s Kaleidoscope tutorial and am trying to refactor the LLVM-based compiler as my own hobby project; currently I have gotten lexing and parsing refactored.</p>
<p>Iâ€™ve also done a number of projects related to C/C++. Some includes reimplementing std::vector with the standard allocator. As another semester-long class project, Iâ€™m working on PintOS, an educational operating system, adding support for syscalls, multiprocessing and multithreading and file systems.</p>
<h2 id="my-contribution-to-gccrs"><a aria-hidden="true" tabindex="-1" href="#my-contribution-to-gccrs"><span class="icon icon-link"></span></a>My contribution to gccrs</h2>
<p>I want to preface this by saying all of this contribution would not be possible if not for my potential mentor Arthur.</p>
<p>I joined gccrs' Zulip channel in late febuary / early March and since have put in some pull requests for the repository as well as contributed an ARM-based Ubuntu Docker image tailored to development of gccrs with persistent storage settings and different hotswappable versions of the image via docker compose at <a href="https://github.com/badumbatish/gccrs-workspace" rel="nofollow" target="_blank">https://github.com/badumbatish/gccrs-workspace</a>.</p>
<p>My first contribution was adding tl::optional typing to MacroBuiltin map, a data structure I need to familiar with for this project.</p>
<p>The second contribution was to refactor all macro handlers into different themes to ease navigation and development.</p>
<p>For the third and fourth one, I fixed a error emitting bug when late-resolving an id expression and fixed visibility storage from parsing ExternalTypeItem until HIR construction.</p>
<p>Please feel free to see a list of my pull requests to gccrs at <a href="https://github.com/Rust-GCC/gccrs/pulls?q=is%3Apr+author%3Abadumbatish+" rel="nofollow" target="_blank">https://github.com/Rust-GCC/gccrs/pulls?q=is%3Apr+author%3Abadumbatish+</a></p>
<p>or by putting <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>is:pr author:badumbatish</span></span><button type="button" title="Copy code" aria-label="Copy code" data="is:pr author:badumbatish" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> in the pull request search bar.</p>
<p>or by selecting <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark-dimmed"><span data-line=""><span>badumbatish</span></span><button type="button" title="Copy code" aria-label="Copy code" data="badumbatish" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></span> as author in mobile.</p>6:["$","div",null,{"className":"py-12 flex flex-col items-center  justify-items-start mx-auto ","children":[["$","$L2",null,{"href":"/blog","className":"flex justify-center text-4xl","children":["$","h2",null,{"children":"My blog"}]}],["$","article",null,{"className":"p-8 prose pt-0.5 max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto","children":[["$","div",null,{"className":"flex justify-center text-2xl font-bold ","children":["$","h2",null,{"children":"jjasmine's Gsoc GCCRS proposal"}]}],["$","div",null,{"className":"flex justify-start text-xl font-bold underline","children":["$","h4",null,{"children":"2025-02-25"}]}],["$","div",null,{"dangerouslySetInnerHTML":{"__html":"$11"}}]]}]]}]
a:{"metadata":[["$","title","0",{"children":"jjasmine's Gsoc GCCRS proposal"}],["$","meta","1",{"name":"description","content":"Jasmine revealed her self-hosted 2024 GSoc proposal for 'Getting into GSoc how?' and LinkedIn article"}],["$","link","2",{"rel":"icon","href":"/_next/static/media/pfp5.0daa0f7d.jpeg"}],["$","$L12","3",{}]],"error":null,"digest":"$undefined"}
f:"$a:metadata"
